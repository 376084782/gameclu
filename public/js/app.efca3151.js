(function(e){function t(t){for(var s,o,r=t[0],c=t[1],l=t[2],d=0,m=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&m.push(n[o][0]),n[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);u&&u(t);while(m.length)m.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],s=!0,r=1;r<a.length;r++){var c=a[r];0!==n[c]&&(s=!1)}s&&(i.splice(t--,1),e=o(o.s=a[0]))}return e}var s={},n={app:0},i=[];function o(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=s,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(a,s,function(t){return e[t]}.bind(null,s));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var u=c;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},"072c":function(e,t,a){},"35e5":function(e,t,a){},4480:function(e,t,a){},4678:function(e,t,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(e){var t=i(e);return a(t)}function i(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=i,e.exports=n,n.id="4678"},"56d7":function(t,a,s){"use strict";s.r(a);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("a026"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},["/game"==e.$route.path?[a("iframe",{ref:"iframe",staticClass:"frame-game",attrs:{id:"iframe1",src:e.url,frameborder:"0",onload:"iframe1.focus()",onfocus:"iframe1.focus()"}})]:a("div",{attrs:{id:"app"}},[a("c-header"),a("div",{staticClass:"main-scroller"},[a("keep-alive",[a("router-view")],1),a("c-footer")],1)],1),e.logined?a("div",{staticClass:"icon-friend",class:{"has-message":e.showRedPoint},on:{click:function(t){e.showListFriend=!e.showListFriend}}}):e._e(),a("modal-profile"),a("modal-signin"),a("modal-reset"),a("modal-reset-success"),a("modal-change-pwd",{attrs:{type:e.changePwdType,code:e.changePwdCode}}),a("modal-create-account"),a("modal-info"),a("modal-fill-info"),e.showListFriend?a("friend-list"):e._e(),a("modal-buy-success",{attrs:{show:e.showModalBuySuccess,coins:e.coinGot},on:{close:e.onBuySuccess,"update:show":function(t){e.showModalBuySuccess=t}}}),a("modal-message")],2)},o=[],r=s("5530"),c=(s("99af"),s("4d63"),s("ac1f"),s("25f0"),s("466d"),s("841c"),s("8594"),s("ddc9"),s("072c"),s("7878"),s("2f62")),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"friend-list",class:{"show-chat":3==e.page}},[a("div",{staticClass:"list-header"},[a("span",{on:{click:function(t){e.page=1}}},[1!=e.page?a("i",{staticClass:"el-icon-arrow-left"}):e._e(),3!=e.page?[e._v(e._s(e.$t("m.Friends")))]:[e._v(e._s(e.dataSel.name))]],2),1==e.page?a("span",{staticClass:"plus",on:{click:function(t){e.page=2}}},[a("i",{staticClass:"el-icon-circle-plus-outline"})]):e._e()]),2==e.page?a("el-input",{staticClass:"input-search",attrs:{size:"small",placeholder:"","suffix-icon":"el-icon-search"},on:{change:e.doSearch},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}}):e._e(),a("div",{ref:"scroller",staticClass:"scroll"},[a("div",{staticClass:"container"},[2==e.page?e._l(e.listAdd,(function(t,s){return a("div",{key:s,staticClass:"item-friend"},[a("el-avatar",{staticClass:"avatar",attrs:{size:28,src:t.avatar}}),a("span",{staticClass:"name"},[e._v(e._s(t.username))]),a("span",{staticClass:"plus",on:{click:function(a){return e.doAddFriend(t)}}},[a("i",{staticClass:"el-icon-circle-plus-outline"})])],1)})):1==e.page?[e._l(e.listRequest,(function(t,s){return a("div",{key:s,staticClass:"item-add"},[a("div",{staticClass:"point"}),a("div",{staticClass:"top"},[a("el-avatar",{staticClass:"avatar",attrs:{size:28,src:e.circleUrl}}),a("div",{staticClass:"right"},[a("p",{staticClass:"name"},[e._v(e._s(t.name))]),a("p",{staticClass:"cnt"},[e._v("请求添加好友")])])],1),a("div",{staticClass:"btm"},[a("div",{staticClass:"btn",on:{click:function(a){return e.handleRequest(!0,t.userId)}}},[e._v(e._s(e.$t("m.AddTo")))]),a("div",{staticClass:"btn dash",on:{click:function(a){return e.handleRequest(!1,t.userId)}}},[e._v(e._s(e.$t("m.Refuse")))])])])})),e._l(e.listFriend,(function(t,s){return a("div",{key:s,staticClass:"item-friend",on:{click:function(a){return e.goChat(t)}}},[t.flag?a("div",{staticClass:"point"}):e._e(),a("el-avatar",{staticClass:"avatar",attrs:{size:28,src:t.avatar}}),a("span",{staticClass:"name"},[e._v(e._s(t.name))])],1)}))]:3==e.page?e._l(e.chatList,(function(t,s){return a("div",{key:s,staticClass:"item-chat",class:{self:t.userId!=e.userInfo.id,other:t.userId==e.userInfo.id}},[a("el-avatar",{staticClass:"avatar",attrs:{size:28,src:t.userId==e.userInfo.id?e.userInfo.sysUser.avatar:e.dataSel.avatar}}),a("div",{staticClass:"bubble"},[e._v(e._s(t.msg))])],1)})):e._e()],2)]),3==e.page?a("el-input",{staticClass:"textarea-chat",attrs:{type:"textarea"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendChatMsg(t)}},model:{value:e.chatInputValue,callback:function(t){e.chatInputValue=t},expression:"chatInputValue"}}):e._e()],1)},u=[],d=(s("5319"),s("4de4"),s("1fba")),m={computed:Object(r["a"])({},Object(c["c"])(["listFriend","listRequest","userInfo"])),data:function(){return{chatList:[],dataSel:{},listAdd:[],circleUrl:"",searchKey:"",page:1,chatInputValue:""}},mounted:function(){this.initData()},created:function(){var e=this;this.$nextTick((function(t){new d["a"](e.$refs.scroller,{click:!0})}))},methods:{sendChatMsg:function(e){var t=this;if(this.chatInputValue){var a=this.chatInputValue;a=a.replace(/[\r\n]/g,""),this.chatInputValue="",this.$ajax({url:"/api/friend/send",type:"put",params:{userId:this.dataSel.userId,msg:a}}).then((function(e){t.getChatList(t.dataSel.userId)}))}},getChatList:function(e){var t=this;this.$ajax({url:"/api/friend/msg/".concat(e),type:"get",params:{}}).then((function(e){t.chatList=e.list.reverse()}))},initData:function(){this.$store.commit("freshFriendAll")},doSearch:function(){var e=this;this.$ajax({url:"/api/friend/search/".concat(this.searchKey),type:"get",params:{}}).then((function(t){e.listAdd=t.filter((function(t){return t.id!=e.userInfo.id}))}))},doAddFriend:function(e){this.$ajax({url:"/api/friend/".concat(e.id),type:"put",params:{}}).then((function(e){console.log("添加好友结果",e)}))},handleRequest:function(e,t){var a=this;this.$ajax({url:"/api/friend/requests/".concat(e?"agree":"refuse","/").concat(t),type:"put",params:{}}).then((function(e){a.initData()}))},goChat:function(e){this.dataSel=e,this.getChatList(e.userId),this.page=3}}},h=m,f=s("2877"),p=Object(f["a"])(h,l,u,!1,null,null,null),g=p.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header"},[e.subTitle?[a("div",{staticClass:"button btn-back",on:{click:e.goBack}},[a("i",{staticClass:"icon-back"}),e._v(" "+e._s(e.$t("m.BACK"))+" ")]),a("div",{staticClass:"list-menu center"},[a("div",{staticClass:"item-menu active"},[e._v(e._s(e.subTitle))])])]:[a("div",{staticClass:"icon"}),a("div",{staticClass:"list-menu"},e._l(e.menuList,(function(t,s){return a("div",{key:s,staticClass:"item-menu",class:{active:e.selectedMenu==s},on:{click:function(a){return e.clickMenu(t,s)}}},[e._v(e._s(t.name))])})),0)],a("div",{staticClass:"area-right"},[e.$store.getters.token?[a("div",{staticClass:"wrap-coin"},[a("i",{staticClass:"coin"}),e._v(" "+e._s(e.userInfo.money)+" ")]),a("div",{staticClass:"wrap-name mgRight10",on:{click:function(t){e.showDown=!e.showDown}}},[a("div",{staticClass:"avatar-wrap"},[a("img",{attrs:{src:e.userInfo.sysUser&&e.userInfo.sysUser.avatar,alt:""}})]),a("span",[e._v(e._s(e.userInfo.username))]),a("i",{staticClass:"arrow-down"}),e.showDown?a("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.downOuter,expression:"downOuter"}],staticClass:"menu-down"},[a("div",{staticClass:"menu-down-item",on:{click:e.showProfile}},[e._v(e._s(e.$t("m.MyProfile")))]),a("div",{staticClass:"menu-down-item",on:{click:e.doLogOut}},[e._v(e._s(e.$t("m.LogOut")))])]):e._e()])]:[a("el-button",{staticClass:"button",on:{click:e.openDialogSignin}},[a("i",{staticClass:"signin"}),e._v(" "+e._s(e.$t("m.Signin"))+" ")]),a("el-button",{staticClass:"button",on:{click:e.goPlay}},[a("i",{staticClass:"play"}),e._v(" "+e._s(e.$t("m.PlayNow"))+" ")])],a("div",{staticClass:"btn-lang",on:{click:function(t){e.showListLang=!e.showListLang}}},[a("i",{staticClass:"txt-lang"},[e._v(e._s("en-US"==e.$i18n.locale?e.$t("m.en"):e.$t("m.ch")))]),a("i",{staticClass:"icon-down"}),e.showListLang?a("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.downOuter,expression:"downOuter"}],staticClass:"list-lang"},e._l(e.langList,(function(t,s){return a("div",{key:s,staticClass:"item",on:{click:function(a){return a.stopPropagation(),e.doChangLang(t)}}},[e._v(e._s(t.label))])})),0):e._e()])],2)],2)},v=[],w=(s("7db0"),s("9169")),y={props:{},directives:{Clickoutside:w["a"]},computed:Object(r["a"])(Object(r["a"])({},Object(c["c"])(["userInfo"])),{},{subTitle:function(){return this.$route.query.subTitle},langList:function(){return[{label:this.$t("m.en"),type:"en-US"},{label:this.$t("m.ch"),type:"zh-CN"}]},menuList:function(){return[{name:this.$t("m.HOME"),url:"/main"},{name:this.$t("m.PLAY"),url:"/room"},{name:this.$t("m.STORE"),url:"/store"},{name:this.$t("m.MAPS"),url:"/maps"}]}}),data:function(){return{showListLang:!1,showDown:!1,selectedMenu:0}},mounted:function(){this.checkSelected()},watch:{$route:function(){this.checkSelected()}},methods:{downOuter:function(){this.showDown=!1,this.showListLang=!1},doChangLang:function(e){this.$i18n.locale=e.type,this.showListLang=!1},changeLangEvent:function(){var e=this;console.log("changeLangEvent"),this.$confirm(this.$t("m.SureChangeLang"),this.$t("m.Hint"),{confirmButtonText:this.$t("m.Sure"),cancelButtonText:this.$t("m.Cancel"),type:"warning"}).then((function(){"zh-CN"===e.$i18n.locale?(e.$i18n.locale="en-US",console.log("en-US")):(e.$i18n.locale="zh-CN",console.log("zh-CN"))})).catch((function(){console.log("catch")}))},showProfile:function(){this.$store.commit("toggleModalProfile",!0)},doLogOut:function(){this.$store.dispatch("doLogOut")},showModalInfo:function(){this.$store.commit("toggleModalInfo",!0)},goPlay:function(){this.$router.push("/room")},goBack:function(){this.$router.go(-1)},checkSelected:function(){var e=this,t=this.menuList.find((function(t){return t.url==e.$route.path})),a=this.menuList.indexOf(t);t&&(this.selectedMenu=a)},openDialogSignin:function(){this.$store.commit("toggleModalSignin",!0)},clickMenu:function(e,t){this.selectedMenu=t,this.$router.push(e.url)}}},C=y,k=Object(f["a"])(C,b,v,!1,null,null,null),S=k.exports,_=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},$=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"footer"},[a("i",{staticClass:"icon-footer"}),a("div",{staticClass:"wrap-icon"},[a("i",{staticClass:"facebook1"}),a("i",{staticClass:"Instagram1"}),a("i",{staticClass:"Youtube1"}),a("i",{staticClass:"Twitter1"})]),a("p",{staticClass:"txt mgTop28"},[e._v("@2021 plus2 entertainment，inc，all rights reserved.")]),a("p",{staticClass:"txt mgTop8"},[e._v("All trademarks referenced herein are the properties of their respective owners.")]),a("div",{staticClass:"wrap-btm"},[a("a",{attrs:{href:""}},[e._v("Privacy Notice")]),a("a",{attrs:{href:""}},[e._v("Terms of service")]),a("a",{attrs:{href:""}},[e._v("Cookie Preference")])])])}],j={props:{},data:function(){return{}},methods:{}},P=j,M=Object(f["a"])(P,_,$,!1,null,null,null),I=M.exports,R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"modal-signin",attrs:{title:e.$t("m.SignIn"),visible:e.showModalSignin,"before-close":e.handleClose,width:"5rem"},on:{"update:visible":function(t){e.showModalSignin=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.userInfo}},[a("el-form-item",{staticStyle:{width:"100%"},attrs:{prop:"username"}},[a("el-input",{attrs:{placeholder:e.$t("m.USERNAME")},model:{value:e.userInfo.username,callback:function(t){e.$set(e.userInfo,"username",t)},expression:"userInfo.username"}})],1),a("el-form-item",{staticStyle:{width:"100%"},attrs:{prop:"password"}},[a("el-input",{attrs:{placeholder:e.$t("m.PASSWORD"),"show-password":""},model:{value:e.userInfo.password,callback:function(t){e.$set(e.userInfo,"password",t)},expression:"userInfo.password"}})],1),a("el-button",{staticClass:"mgTop18 button button-big",on:{click:e.doSignin}},[e._v(e._s(e.$t("m.SignIn")))]),a("div",{staticClass:"line-dash"},[e._v(e._s(e.$t("m.OrSignWith")))]),a("div",{staticClass:"wrap-icon"},[a("i",{staticClass:"facebook clickable",on:{click:e.doLoginByF}}),a("i",{staticClass:"google clickable",attrs:{id:"google_button"}})]),a("div",{staticClass:"btm"},[a("a",{on:{click:e.goModalReset}},[e._v(e._s(e.$t("m.Forget")))]),a("a",{on:{click:e.goCreate}},[e._v(e._s(e.$t("m.CreateAccount")))])])],1)],1)},x=[],O=s("1da1"),D=(s("96cf"),s("d3b7"),s("a4d9"),s("1157")),T=s.n(D),E={props:{},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(c["c"])(["showModalSignin"])),Object(c["b"])(["reqSignin"])),{},{rules:function(){return{username:[{required:!0,message:this.$t("m.RequireUsername"),trigger:"blur"},{min:3,message:this.$t("m.lengthMoreThan3"),trigger:"blur"}],password:[{required:!0,message:this.$t("m.RequirePassword"),trigger:"blur"},{min:6,message:this.$t("m.lengthMoreThan6"),trigger:"blur"}]}}}),data:function(){return{userInfo:{username:"",password:""},Ginited:!1}},watch:{showModalSignin:function(e){e&!this.Ginited&&(this.Ginited=!0,this.initLoginByG())}},mounted:function(){},methods:{getscript:function(e){return Object(O["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){T.a.ajaxSetup({cache:!0}),T.a.getScript(e,(function(){t()}))})));case 1:case"end":return t.stop()}}),t)})))()},attachSignin:function(e,t){var a=this;e.attachClickHandler(t,{},(function(t){var s=e.currentUser.get().getBasicProfile();console.log("ggggg"),a.callbackF("g",{userId:s.getId(),username:s.getName(),avatar:s.getImageUrl(),email:s.getEmail()})}),(function(e){console.log(JSON.stringify(e,void 0,2))}))},initLoginByG:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(window.gapi){t.next=3;break}return t.next=3,e.getscript("https://apis.google.com/js/platform.js?onload=init");case 3:gapi.load("auth2",(function(){var t=gapi.auth2.init({client_id:"280788659115-ssfbhi7a485anlracamo0qko9i2doata.apps.googleusercontent.com",cookiepolicy:"single_host_origin",scope:"profile"});e.attachSignin(t,document.getElementById("google_button"))}));case 4:case"end":return t.stop()}}),t)})))()},doLoginByF:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(window.FB){t.next=3;break}return t.next=3,e.getscript("https://connect.facebook.net/en_US/sdk.js");case 3:FB.init({appId:"4341049742574125",version:"v10.0"}),FB.getLoginStatus((function(t){console.log(t,"res"),"connected"==t.status?e.callbackF("f",{userToken:t.authResponse.accessToken,userId:t.authResponse.userID}):FB.login((function(t){"connected"===t.status&&e.callbackF("f",{userToken:t.authResponse.accessToken,userId:t.authResponse.userID})}))}));case 5:case"end":return t.stop()}}),t)})))()},callbackF:function(e,t){var a=this;return Object(O["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if("g"!=e){s.next=6;break}return a.toggle(!1),s.next=4,a.$store.dispatch("checkLoginByGoogle",t);case 4:s.next=9;break;case 6:if("f"!=e){s.next=9;break}return s.next=9,a.$store.dispatch("checkLoginByFacebook",t);case 9:a.$store.dispatch("checkLogined");case 10:case"end":return s.stop()}}),s)})))()},goCreate:function(){this.$store.commit("toggleModalCreateAccount",!0),this.toggle(!1)},goModalReset:function(){this.$store.commit("toggleModalReset",!0),this.toggle(!1)},doSignin:function(){var e=this;console.log(this.$refs["form"]),this.$refs["form"].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.$store.dispatch("reqSignin",e.userInfo).then((function(t){e.toggle(!1),console.log(t,"eee")}))}))},handleClose:function(){this.toggle(!1)},toggle:function(e){this.$store.commit("toggleModalSignin",e)}}},L=E,A=Object(f["a"])(L,R,x,!1,null,null,null),N=A.exports,G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"dialog-reset",attrs:{visible:e.showModalReset,width:"5rem","before-close":e.handleClose},on:{"update:visible":function(t){e.showModalReset=t}}},[a("span",{staticClass:"el-dialog__title",attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.$t("m.EnterEmailToReset")))]),a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.userInfo}},[a("el-form-item",{attrs:{prop:"email"}},[a("el-input",{attrs:{placeholder:e.$t("m.Email")},model:{value:e.userInfo.email,callback:function(t){e.$set(e.userInfo,"email",t)},expression:"userInfo.email"}})],1),a("el-button",{staticClass:"mgTop50 button button-big",on:{click:e.doSendEmail}},[e._v(e._s(e.$t("m.Next")))])],1)],1)},F=[],q={props:{},computed:Object(r["a"])(Object(r["a"])({},Object(c["c"])(["showModalReset"])),{},{rules:function(){return{email:[{type:"email",required:!0,message:this.$t("m.RequireEmail"),trigger:"blur"}]}}}),data:function(){return{userInfo:{username:"",password:""}}},methods:{doSendEmail:function(){var e=this;console.log(1212),this.$refs["form"].validate((function(t){t&&e.$ajax({url:"/user/reset/password",type:"POST",params:e.userInfo}).then((function(t){e.toggle(!1),e.$store.commit("toggleModalResetSuccess",{flag:!0,email:e.userInfo.email})}))}))},handleClose:function(){this.toggle(!1)},toggle:function(e){this.$store.commit("toggleModalReset",e)}}},B=q,z=Object(f["a"])(B,G,F,!1,null,null,null),U=z.exports,W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"dialog-reset",attrs:{visible:e.showModalResetSuccess,width:"5rem","before-close":e.handleClose,title:"Reset Password"},on:{"update:visible":function(t){e.showModalResetSuccess=t}}},[a("p",{staticClass:"txt"},[e._v(e._s(e.$t("m.ResetEmailSend")))]),a("el-button",{staticClass:"mgTop50 button button-big",on:{click:e.doSendEmail}},[e._v(e._s(e.$t("m.Resend")))]),a("div",{staticClass:"btm mgTop18"},[a("a",{attrs:{href:""},on:{click:e.goModalSignin}},[e._v(e._s(e.$t("m.BackSignPage")))])])],1)},H=[],J={props:{},computed:Object(r["a"])({},Object(c["c"])(["showModalResetSuccess","currentModalData"])),data:function(){return{userInfo:{username:"",password:""}}},methods:{goModalSignin:function(){this.toggle(!1),this.$store.commit("toggleModalSignin",!0)},doSendEmail:function(){console.log(this.currentModalData.email,"this.currentModalData.email"),this.$ajax({url:"/user/reset/password",type:"POST",params:{email:this.currentModalData.email}}).then((function(e){})).catch((function(e){console.log("errrr")}))},handleClose:function(){this.toggle(!1)},toggle:function(e){this.$store.commit("toggleModalResetSuccess",{flag:e})}}},V=J,Y=Object(f["a"])(V,W,H,!1,null,null,null),K=Y.exports,Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"dialog-change-pwd",attrs:{visible:e.showModalChangePwd,width:"5rem",title:e.$t("m.ChangePassword"),"before-close":e.handleClose},on:{"update:visible":function(t){e.showModalChangePwd=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.userInfo}},[a("el-form-item",{attrs:{prop:"passwordNew"}},[a("el-input",{attrs:{"show-password":"",placeholder:e.$t("m.NEWPASSWORD")},on:{blur:function(t){e.focusInPwd=!1},focus:function(t){e.focusInPwd=!0}},model:{value:e.userInfo.passwordNew,callback:function(t){e.$set(e.userInfo,"passwordNew",t)},expression:"userInfo.passwordNew"}})],1),a("el-form-item",{attrs:{prop:"password2"}},[a("el-input",{attrs:{placeholder:e.$t("m.CONFIRMPASSWORD"),"show-password":""},model:{value:e.userInfo.password2,callback:function(t){e.$set(e.userInfo,"password2",t)},expression:"userInfo.password2"}})],1),a("el-button",{staticClass:"mgTop50 button button-big",on:{click:e.doChangePsw}},[e._v(e._s(e.$t("m.Next")))])],1)],1)},X=[],Z=(s("a9e3"),{props:{type:{type:Number,default:1},code:String},computed:Object(r["a"])(Object(r["a"])({},Object(c["c"])(["showModalChangePwd"])),{},{rules:function(){var e=this,t=function(t,a,s){""===a?s(new Error(e.$t("m.Require"))):a!==e.userInfo.passwordNew?s(new Error(e.$t("m.PswNotSame"))):s()};return{password2:[{validator:t,trigger:"blur"}],passwordNew:[{required:!0,message:this.$t("m.RequirePassword"),trigger:"blur"},{min:6,message:this.$t("m.lengthMoreThan6"),trigger:"blur"}]}}}),data:function(){return{focusInPwd:!1,userInfo:{username:"",password:"",passwordNew:""}}},methods:{doChangePsw:function(){var e=this;this.$refs["form"].validate((function(t){t&&(1==e.type?e.doChange1():2==e.type&&e.doChange2())}))},doChange2:function(){var e=this;this.$ajax({url:"/api/user/reset/password",type:"put",params:{pwd:this.userInfo.passwordNew,code:this.code}}).then((function(t){e.$message("修改成功"),e.toggle(!1)})).catch((function(t){e.toggle(!1)}))},doChange1:function(){var e=this;this.$ajax({url:"/api/user/modify/password",type:"put",params:{newPwd:this.userInfo.passwordNew}}).then((function(t){e.$message("修改成功"),e.toggle(!1)}))},toggle:function(e){this.$store.commit("toggleModalChangePwd",e)},handleClose:function(){this.toggle(!1)}}}),ee=Z,te=Object(f["a"])(ee,Q,X,!1,null,null,null),ae=te.exports,se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"dialog-info",attrs:{visible:e.showModalInfo,width:"5rem","before-close":e.handleClose},on:{"update:visible":function(t){e.showModalInfo=t}}},[a("p",{staticClass:"txt-lighter"},[e._v(e._s(e.username))]),a("div",{staticClass:"avatar-wrap"},[a("img",{attrs:{src:e.avatar,alt:""}}),a("div",{staticClass:"avatar-icon-wrap"},[a("i",{staticClass:"el-icon-camera-solid",on:{click:e.uploadImg}})])]),a("div",{staticClass:"btm"},[a("a",{attrs:{href:"javascript:;"},on:{click:e.goChangePwd}},[e._v(e._s(e.$t("m.ChangePassword")))])]),a("template",{slot:"footer"},[a("el-button",{staticClass:"button button0",on:{click:e.doCancel}},[e._v(e._s(e.$t("m.Cancel")))]),a("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:e.doSave}},[e._v(e._s(e.$t("m.Save")))])],1)],2)},ne=[],ie=s("a3e9"),oe=s("53ca"),re=(s("1276"),s("5cc6"),s("9a8c"),s("a975"),s("735e"),s("c1ac"),s("d139"),s("3a7b"),s("d5d6"),s("82f8"),s("e91f"),s("60bd"),s("5f96"),s("3280"),s("3fcc"),s("ca91"),s("25a1"),s("cd26"),s("3c5d"),s("2954"),s("649e"),s("219c"),s("170b"),s("b39a"),s("72f7"),s("2b3d"),s("3ca3"),s("ddb0"),s("9129"),{});function ce(e){return["image/png","image/jpeg","image/gif"].some((function(t){return t===e}))}re.urltoImage=function(e){return new Promise((function(t,a){var s=new Image;s.onload=function(){return t(s)},s.onerror=function(){return a(new Error("urltoImage(): Image failed to load, please check the image URL"))},s.src=e}))},re.urltoBlob=function(e){return fetch(e).then((function(e){return e.blob()}))},re.imagetoCanvas=function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t){var a,s,n,i,o,r,c,l=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(r in a=l.length>1&&void 0!==l[1]?l[1]:{},s=document.createElement("canvas"),n=s.getContext("2d"),a)Object.prototype.hasOwnProperty.call(a,r)&&(a[r]=Number(a[r]));a.scale?(c=a.scale>0&&a.scale<10?a.scale:1,o=t.width*c,i=t.height*c):(o=a.width||a.height*t.width/t.height||t.width,i=a.height||a.width*t.height/t.width||t.height),[5,6,7,8].some((function(e){return e===a.orientation}))?(s.height=o,s.width=i):(s.height=i,s.width=o),e.t0=a.orientation,e.next=3===e.t0?9:6===e.t0?12:8===e.t0?15:2===e.t0?18:4===e.t0?22:5===e.t0?27:7===e.t0?32:37;break;case 9:return n.rotate(180*Math.PI/180),n.drawImage(t,-s.width,-s.height,s.width,s.height),e.abrupt("break",38);case 12:return n.rotate(90*Math.PI/180),n.drawImage(t,0,-s.width,s.height,s.width),e.abrupt("break",38);case 15:return n.rotate(270*Math.PI/180),n.drawImage(t,-s.height,0,s.height,s.width),e.abrupt("break",38);case 18:return n.translate(s.width,0),n.scale(-1,1),n.drawImage(t,0,0,s.width,s.height),e.abrupt("break",38);case 22:return n.translate(s.width,0),n.scale(-1,1),n.rotate(180*Math.PI/180),n.drawImage(t,-s.width,-s.height,s.width,s.height),e.abrupt("break",38);case 27:return n.translate(s.width,0),n.scale(-1,1),n.rotate(90*Math.PI/180),n.drawImage(t,0,-s.width,s.height,s.width),e.abrupt("break",38);case 32:return n.translate(s.width,0),n.scale(-1,1),n.rotate(270*Math.PI/180),n.drawImage(t,-s.height,0,s.height,s.width),e.abrupt("break",38);case 37:n.drawImage(t,0,0,s.width,s.height);case 38:return e.abrupt("return",s);case 39:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re.canvastoFile=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/jpeg";return new Promise((function(s){return e.toBlob((function(e){return s(e)}),a,t)}))},re.canvastoDataURL=function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t,a,s){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return ce(s)||(s="image/jpeg"),e.abrupt("return",t.toDataURL(s,a));case 2:case"end":return e.stop()}}),e)})));return function(t,a,s){return e.apply(this,arguments)}}(),re.filetoDataURL=function(e){return new Promise((function(t){var a=new FileReader;a.onloadend=function(e){return t(e.target.result)},a.readAsDataURL(e)}))},re.dataURLtoImage=function(e){return new Promise((function(t,a){var s=new Image;s.onload=function(){return t(s)},s.onerror=function(){return a(new Error("dataURLtoImage(): dataURL is illegal"))},s.src=e}))},re.dataURLtoFile=function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t,a){var s,n,i,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s=t.split(","),n=s[0].match(/:(.*?);/)[1],i=atob(s[1]),o=i.length,r=new Uint8Array(o);while(o--)r[o]=i.charCodeAt(o);return ce(a)&&(n=a),e.abrupt("return",new Blob([r],{type:n}));case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),re.downloadFile=function(e,t){var a=document.createElement("a");a.href=window.URL.createObjectURL(e),a.download=t||Date.now().toString(36),document.body.appendChild(a);var s=document.createEvent("MouseEvents");s.initEvent("click",!1,!1),a.dispatchEvent(s),document.body.removeChild(a)},re.compress=function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t){var a,s,n,i,o,r,c,l,u=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=u.length>1&&void 0!==u[1]?u[1]:{},t instanceof Blob){e.next=3;break}throw new Error("compress(): First arg must be a Blob object or a File object.");case 3:if("object"!==Object(oe["a"])(a)&&(a=Object.assign({quality:a})),a.quality=Number(a.quality),!Number.isNaN(a.quality)){e.next=7;break}return e.abrupt("return",t);case 7:return e.next=9,re.filetoDataURL(t);case 9:return s=e.sent,n=s.split(",")[0].match(/:(.*?);/)[1],i="image/jpeg",ce(a.type)&&(i=a.type,n=a.type),e.next=15,re.dataURLtoImage(s);case 15:return o=e.sent,e.next=18,re.imagetoCanvas(o,Object.assign({},a));case 18:return r=e.sent,e.next=21,re.canvastoDataURL(r,a.quality,i);case 21:return c=e.sent,e.next=24,re.dataURLtoFile(c,n);case 24:return l=e.sent,e.abrupt("return",l);case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re.compressAccurately=function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t){var a,s,n,i,o,r,c,l,u,d,m,h,f,p,g=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=g.length>1&&void 0!==g[1]?g[1]:{},t instanceof Blob){e.next=3;break}throw new Error("compressAccurately(): First arg must be a Blob object or a File object.");case 3:if("object"!==Object(oe["a"])(a)&&(a=Object.assign({size:a})),a.size=Number(a.size),!Number.isNaN(a.size)){e.next=7;break}return e.abrupt("return",t);case 7:if(!(1024*a.size>t.size)){e.next=9;break}return e.abrupt("return",t);case 9:return a.accuracy=Number(a.accuracy),(!a.accuracy||a.accuracy<.8||a.accuracy>.99)&&(a.accuracy=.95),s={max:a.size*(2-a.accuracy)*1024,accurate:1024*a.size,min:a.size*a.accuracy*1024},e.next=14,re.filetoDataURL(t);case 14:return n=e.sent,i=n.split(",")[0].match(/:(.*?);/)[1],o="image/jpeg",ce(a.type)&&(o=a.type,i=a.type),e.next=20,re.dataURLtoImage(n);case 20:return r=e.sent,e.next=23,re.imagetoCanvas(r,Object.assign({},a));case 23:c=e.sent,l=.75,u=.5,m=[null,null],h=1;case 28:if(!(h<=7)){e.next=50;break}return e.next=31,re.canvastoDataURL(c,u,o);case 31:if(d=e.sent,f=d.length*l,7!==h){e.next=36;break}return(s.max<f||s.min>f)&&(d=[d].concat(m).filter((function(e){return e})).sort((function(e,t){return Math.abs(e.length*l-s.accurate)-Math.abs(t.length*l-s.accurate)}))[0]),e.abrupt("break",50);case 36:if(!(s.max<f)){e.next=41;break}m[1]=d,u-=Math.pow(.5,h+1),e.next=47;break;case 41:if(!(s.min>f)){e.next=46;break}m[0]=d,u+=Math.pow(.5,h+1),e.next=47;break;case 46:return e.abrupt("break",50);case 47:h++,e.next=28;break;case 50:return e.next=52,re.dataURLtoFile(d,i);case 52:if(p=e.sent,!(p.size>t.size)){e.next=55;break}return e.abrupt("return",t);case 55:return e.abrupt("return",p);case 56:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var le=re,ue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,a=e.height>=e.width,s=a?e.height:e.width,n=a?e.width:e.height,i=n,o=s;s>t&&(o=t,i=n*t/s);var r={width:a?i:o,height:a?o:i};return r},de=T()('<input type="file" id="uploadInput"/>');de.css({display:"none"});var me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t,a){0==T()("#uploadInput").length&&T()("body").append(de),de.unbind(),de.bind("change",(function(s){fe(de[0],e,(function(e){he(e).then((function(a){t({file:e,img:a})}))}),(function(e){a(e)}))})),de.trigger("click")}))};function he(e){return new Promise((function(t,a){var s=new FileReader;s.onload=function(e){t(e.target.result)},s.readAsDataURL(e),s.onerror=function(){a(new Error("blobToBase64 error"))}}))}var fe=function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t,a,s,n){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(ie["getImageSize"])(t.files[0]).then((function(e){var a=ue(e,200),s=204800/de[0].files[0].size;s>1&&(s=1);var n=le.compress(t.files[0],{quality:s,type:"image/jpeg",width:a.width,height:a.height});return n}));case 2:return i=e.sent,s(i),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t,a,s,n){return e.apply(this,arguments)}}(),pe={props:{},computed:Object(r["a"])({},Object(c["c"])(["showModalInfo"])),data:function(){return{focusInPwd:!1,username:"",avatar:"",avatarFile:null}},watch:{showModalInfo:function(e){e&&this.resetInfo()}},methods:{resetInfo:function(){this.username=this.$store.getters.userInfo.username,this.avatar=this.$store.getters.userInfo.sysUser.avatar},doCancel:function(){this.handleClose()},doSave:function(){var e=this;this.$ajax({url:"/api/user/avatar",type:"post",useForm:!0,params:{file:this.avatarFile}}).then((function(t){e.$store.dispatch("checkLogined")}))},uploadImg:function(){var e=this;me().then((function(t){var a=t.img,s=t.file;console.log(a,s),e.avatar=a,e.avatarFile=s}))},goChangePwd:function(){this.$store.commit("toggleModalChangePwd",!0)},handleClose:function(){this.toggle(!1)},toggle:function(e){this.$store.commit("toggleModalInfo",e)}}},ge=pe,be=Object(f["a"])(ge,se,ne,!1,null,null,null),ve=be.exports,we=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"dialog-info",attrs:{visible:e.showModalCreateAccount,width:"5rem","before-close":e.handleClose,title:e.title},on:{"update:visible":function(t){e.showModalCreateAccount=t}}},[1==e.step?a("div",[a("el-form",{ref:"form1",attrs:{rules:e.rules,model:e.userInfo}},[a("el-form-item",{attrs:{prop:"email"}},[a("el-input",{attrs:{placeholder:e.$t("m.Email")},model:{value:e.userInfo.email,callback:function(t){e.$set(e.userInfo,"email",t)},expression:"userInfo.email"}})],1),a("el-form-item",{attrs:{prop:"gender"}},[a("el-select",{attrs:{placeholder:e.$t("m.GENDER")},model:{value:e.userInfo.gender,callback:function(t){e.$set(e.userInfo,"gender",t)},expression:"userInfo.gender"}},[a("el-option",{key:"male",attrs:{label:"male",value:"1"}}),a("el-option",{key:"female",attrs:{label:"female",value:"2"}})],1)],1),a("el-form-item",{attrs:{prop:"birthday"}},[a("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:e.$t("m.BIRTHDAY")},model:{value:e.userInfo.birthday,callback:function(t){e.$set(e.userInfo,"birthday",t)},expression:"userInfo.birthday"}})],1)],1),a("p",{staticClass:"txt txt-left mgTop8"},[e._v(e._s(e.$t("m.WhyNeed")))]),a("el-button",{staticClass:"mgTop18 button button-big",on:{click:e.doStepNext}},[e._v(e._s(e.$t("m.Next")))]),a("div",{staticClass:"wrap-step"},e._l(e.maxStep,(function(t){return a("div",{key:t,staticClass:"item-step",class:{active:e.step==t}})})),0),a("div",{staticClass:"btm mgTop18"},[a("a",{on:{click:e.goSignin}},[e._v(e._s(e.$t("m.AlreadyHaveAccount")))])])],1):2==e.step?a("div",[a("el-form",{ref:"form2",attrs:{rules:e.rules,model:e.userInfo}},[a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{attrs:{placeholder:e.$t("m.USERNAME")},model:{value:e.userInfo.username,callback:function(t){e.$set(e.userInfo,"username",t)},expression:"userInfo.username"}})],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{placeholder:e.$t("m.PASSWORD"),"show-password":""},model:{value:e.userInfo.password,callback:function(t){e.$set(e.userInfo,"password",t)},expression:"userInfo.password"}})],1),a("el-form-item",{attrs:{prop:"password2"}},[a("el-input",{attrs:{placeholder:e.$t("m.CONFIRMPASSWORD"),"show-password":""},model:{value:e.userInfo.password2,callback:function(t){e.$set(e.userInfo,"password2",t)},expression:"userInfo.password2"}})],1),a("el-form-item",{attrs:{prop:"policyChecked"}},[a("el-checkbox",{staticClass:"floatLeft",model:{value:e.userInfo.policyChecked,callback:function(t){e.$set(e.userInfo,"policyChecked",t)},expression:"userInfo.policyChecked"}},[e._v(e._s(e.$t("m.AgreePolicy")))])],1)],1),a("el-button",{staticClass:"mgTop50 button button-big",on:{click:e.doStepNext}},[e._v(e._s(e.$t("m.NEXT")))]),a("div",{staticClass:"wrap-step"},e._l(e.maxStep,(function(t){return a("div",{key:t,staticClass:"item-step",class:{active:e.step==t}})})),0),a("div",{staticClass:"btm mgTop18"},[a("a",{on:{click:function(t){e.step--}}},[e._v(e._s(e.$t("m.Back")))])])],1):a("div",[a("p",{staticClass:"txt"},[e._v(e._s(e.$t("m.FinishAndEnJoy")))]),a("el-button",{staticClass:"mgTop50 button button-big",on:{click:e.doStepNext}},[e._v(e._s(e.$t("m.LetsGo")))]),a("div",{staticClass:"wrap-step mgTop50"},e._l(e.maxStep,(function(t){return a("div",{key:t,staticClass:"item-step",class:{active:e.step==t}})})),0)],1)])},ye=[],Ce={props:{},computed:Object(r["a"])(Object(r["a"])({},Object(c["c"])(["showModalCreateAccount"])),{},{title:function(){return this.$t(this.step>=3?"m.ALLSET":"m.CreateAccount")},rules:function(){var e=this,t=function(t,a,s){a?s():s(new Error(e.$t("m.Require")))},a=function(t,a,s){""===a?s(new Error(e.$t("m.Require"))):a!==e.userInfo.password?s(new Error(e.$t("m.PswNotSame"))):s()};return{password2:[{validator:a,trigger:"blur"}],policyChecked:[{validator:t,trigger:"blur"}],username:[{required:!0,message:this.$t("m.RequireUsername"),trigger:"blur"},{min:3,message:this.$t("m.lengthMoreThan3"),trigger:"blur"}],password:[{required:!0,message:this.$t("m.RequirePassword"),trigger:"blur"},{min:6,message:this.$t("m.lengthMoreThan6"),trigger:"blur"}],email:[{type:"email",required:!0,message:this.$t("m.RequireEmail"),trigger:"blur"}],gender:[{required:!0,message:this.$t("m.Require"),trigger:"blur"}],birthday:[{required:!0,message:this.$t("m.Require"),trigger:"blur"}]}}}),watch:{showModalCreateAccount:function(e){e&&(this.step=1,this.focusInPwd=!1,this.userInfo={username:"",password:"",password2:"",policyChecked:!1})}},data:function(){return{maxStep:3,step:1,focusInPwd:!1,userInfo:{username:"",password:"",password2:"",policyChecked:!1}}},methods:{doStepNext:function(){var e=this;switch(this.step){case 1:this.$refs["form1"].validate((function(t){t&&e.$ajax({url:"/api/user/check/email",type:"get",params:e.userInfo}).then((function(t){e.step++}))}));break;case 2:this.$refs["form2"].validate((function(t){t&&e.$ajax({url:"/register",type:"POST",params:e.userInfo}).then((function(t){e.step=3}))}));break;case 3:this.toggle(!1),this.$store.commit("toggleModalSignin",!0);break}},handleClose:function(){this.toggle(!1)},goSignin:function(){this.toggle(!1),this.$store.commit("toggleModalSignin",!0)},toggle:function(e){this.$store.commit("toggleModalCreateAccount",e)}}},ke=Ce,Se=Object(f["a"])(ke,we,ye,!1,null,null,null),_e=Se.exports,$e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"dialog-profile",attrs:{visible:e.showModalProfile,"before-close":e.handleClose,width:"5.62rem"},on:{"update:visible":function(t){e.showModalProfile=t}}},[a("p",{staticClass:"name"},[e._v(e._s(e.userInfo.username))]),a("p",{staticClass:"sub"},[e._v("ID:"+e._s(e.userInfo.id))]),a("div",{staticClass:"btn-wrap"},[a("div",{staticClass:"btn mgRight10",on:{click:e.openModalInfo}},[e._v(e._s(e.$t("m.EditProfile")))]),a("div",{staticClass:"btn"},[a("i",{staticClass:"coin"}),e._v(" "+e._s(e.userInfo.money)+" ")])]),a("div",{staticClass:"cnt"},[a("div",{staticClass:"wrap-tab"},[a("div",{staticClass:"tab",class:{active:0==e.tag1},on:{click:function(t){e.tag1=0}}},[e._v(e._s(e.$t("m.GameStats")))]),a("div",{staticClass:"tab",class:{active:1==e.tag1},on:{click:function(t){e.tag1=1}}},[e._v(e._s(e.$t("m.PaymentHistory")))])]),0==e.tag1?[0==e.tag1?a("div",{staticClass:"wrap-list1"},[a("div",{staticClass:"item"},[e._v(" "+e._s(e.$t("m.GamesPlayed"))+" "),a("span",{staticClass:"num"},[e._v(e._s(e.statistics.played))])]),a("div",{staticClass:"item"},[e._v(" "+e._s(e.$t("m.GamesWon"))+" "),a("span",{staticClass:"num"},[e._v(e._s(e.statistics.won))])]),a("div",{staticClass:"item"},[e._v(" "+e._s(e.$t("m.Ganselied"))+" "),a("span",{staticClass:"num"},[e._v(e._s(e.statistics.cancelled))])]),a("div",{staticClass:"item"},[e._v(" "+e._s(e.$t("m.NoShows"))+" "),a("span",{staticClass:"num"},[e._v(e._s(e.statistics.noShows))])])]):e._e(),a("div",{staticClass:"wrap-tab"},[a("div",{staticClass:"tab",class:{active:0==e.tag2},on:{click:function(t){e.tag2=0}}},[e._v(e._s(e.$t("m.Late3")))]),a("div",{staticClass:"tab",class:{active:1==e.tag2},on:{click:function(t){e.tag2=1}}},[e._v(e._s(e.$t("m.AllGamesPlayed")))])]),0==e.tag2?a("div",{staticClass:"wrap-list2"},e._l(e.gameScripts,(function(t,s){return a("div",{key:s,staticClass:"item"},[a("div",{staticClass:"wrap-img"},[a("img",{attrs:{src:t.gamePicture,alt:""}})]),a("span",[e._v(e._s(t.gameName))])])})),0):e._e(),1==e.tag2?a("div",{staticClass:"wrap-list1 scroll-x"},e._l(e.gameHistories,(function(t,s){return a("div",{key:s,staticClass:"item5"},[a("span",{staticClass:"n"},[e._v(e._s(t.gameName))]),a("span",{staticClass:"n"},[e._v(e._s(t.gameTag))]),a("span",{staticClass:"n"},[e._v(e._s(t.gameLength)+" "+e._s(e.$t("hours")))]),a("span",{staticClass:"n"},[e._v(e._s(t.gameUserLimit)+" "+e._s(e.$t("players")))])])})),0):e._e()]:[a("div",{staticClass:"wrap-list6"},e._l(e.listPay,(function(t,s){return a("div",{key:s,staticClass:"item"},[a("span",{staticClass:"title1"},[e._v(e._s(t.context))]),a("span",{staticClass:"title2"},[e._v(e._s(t.subContext))]),a("span",{staticClass:"date"},[e._v(e._s(t.time))]),a("span",{staticClass:"num"},[e._v(e._s(t.coin>0?"+":"")+e._s(t.coin))]),a("span",{staticClass:"btn",on:{click:function(a){return e.goPayBack(t.id)}}},[e._v(e._s(e.$t("m.RequestRefund")))])])})),0)]],2)]),a("modal-refund-reason",{attrs:{show:e.showReason},on:{doRefund:e.doPayBack,"update:show":function(t){e.showReason=t}}})],1)},je=[],Pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.$t("m.refundTitle"),visible:e.show,"before-close":e.handleClose,width:"4.3rem"},on:{"update:visible":function(t){e.show=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form}},[a("el-form-item",{staticStyle:{width:"100%"},attrs:{prop:"reason"}},[a("el-select",{attrs:{placeholder:e.$t("m.USERNAME")},model:{value:e.form.reason,callback:function(t){e.$set(e.form,"reason",t)},expression:"form.reason"}},[a("el-option",{attrs:{value:"reason1",label:"reason 1"}})],1)],1),a("el-button",{staticClass:"mgTop18 button button-big",on:{click:e.doSubmit}},[e._v(e._s(e.$t("m.SignIn")))])],1)],1)},Me=[],Ie={props:{show:Boolean},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(c["c"])(["showModalSignin"])),Object(c["b"])(["reqSignin"])),{},{rules:function(){return{reason:[{required:!0,message:this.$t("m.Require"),trigger:"blur"}]}}}),data:function(){return{form:{}}},watch:{},mounted:function(){},methods:{doSubmit:function(){this.$emit("doRefund",this.form.reason)},handleClose:function(){this.toggle(!1)},toggle:function(e){this.$emit("update:show",e)}}},Re=Ie,xe=Object(f["a"])(Re,Pe,Me,!1,null,null,null),Oe=xe.exports,De={props:{},components:{ModalRefundReason:Oe},computed:Object(r["a"])({},Object(c["c"])(["showModalProfile","userInfo","statistics","gameScripts","gameHistories"])),data:function(){return{showReason:!1,listAll:[],tag2:0,tag1:0,focusInPwd:!1,listPay:[],selPayBackId:0}},watch:{showModalProfile:function(e){e&&this.getList()}},methods:{openModalInfo:function(){this.$store.commit("toggleModalInfo",!0)},goPayBack:function(e){this.selPayBackId=e,this.showReason=!0},doPayBack:function(e){var t=this;this.$ajax({url:"/pay/refund/".concat(this.selPayBackId),type:"post",params:{msg:e}}).then((function(e){t.showReason=!1,t.$store.commit("toggleModalMessage",{flag:!0,data:{title:t.$t("m.refundSuccessTitle"),cnt:t.$t("m.refundSuccessCnt")}})}))},getList:function(){var e=this;this.$ajax({url:"/api/payment/self",type:"get"}).then((function(t){e.listPay=t}))},doCancel:function(){this.resetInfo()},doSave:function(){},handleClose:function(){this.toggle(!1)},toggle:function(e){this.$store.commit("toggleModalProfile",e)}}},Te=De,Ee=Object(f["a"])(Te,$e,je,!1,null,null,null),Le=Ee.exports,Ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"modal-info",attrs:{title:e.$t("m.FillInfo"),visible:e.showModalFillInfo,"before-close":e.handleClose,width:"5rem"},on:{"update:visible":function(t){e.showModalFillInfo=t}}},[a("div",[a("el-form",{ref:"form1",attrs:{rules:e.rules,model:e.info}},[a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{attrs:{placeholder:e.$t("m.USERNAME")},model:{value:e.info.username,callback:function(t){e.$set(e.info,"username",t)},expression:"info.username"}})],1),a("el-form-item",{attrs:{prop:"birthday"}},[a("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:e.$t("m.BIRTHDAY")},model:{value:e.info.birthday,callback:function(t){e.$set(e.info,"birthday",t)},expression:"info.birthday"}})],1),a("el-form-item",{attrs:{prop:"email"}},[a("el-input",{attrs:{placeholder:e.$t("m.Email")},model:{value:e.info.email,callback:function(t){e.$set(e.info,"email",t)},expression:"info.email"}})],1),a("el-form-item",{attrs:{prop:"gender"}},[a("el-select",{attrs:{placeholder:e.$t("m.GENDER")},model:{value:e.info.gender,callback:function(t){e.$set(e.info,"gender",t)},expression:"info.gender"}},[a("el-option",{key:"male",attrs:{label:"male",value:"1"}}),a("el-option",{key:"female",attrs:{label:"female",value:"2"}})],1)],1),a("el-button",{staticClass:"mgTop18 button button-big",staticStyle:{width:"100%"},on:{click:e.doJoin}},[e._v(e._s(e.$t("m.Save")))])],1)],1)])},Ne=[],Ge={props:{},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(c["c"])(["showModalFillInfo","selectedRoomData"])),Object(c["b"])(["reqSignin"])),{},{rules:function(){var e=this,t=function(t,a,s){a?s():s(new Error(e.$t("m.Require")))},a=function(t,a,s){""===a?s(new Error(e.$t("m.Require"))):a!==e.userInfo.password?s(new Error(e.$t("m.PswNotSame"))):s()};return{password2:[{validator:a,trigger:"blur"}],policyChecked:[{validator:t,trigger:"blur"}],username:[{required:!0,message:this.$t("m.RequireUsername"),trigger:"blur"},{min:3,message:this.$t("m.lengthMoreThan3"),trigger:"blur"}],password:[{required:!0,message:this.$t("m.RequirePassword"),trigger:"blur"},{min:6,message:this.$t("m.lengthMoreThan6"),trigger:"blur"}],email:[{type:"email",required:!0,message:this.$t("m.RequireEmail"),trigger:"blur"}],gender:[{required:!0,message:this.$t("m.Require"),trigger:"blur"}],birthday:[{required:!0,message:this.$t("m.Require"),trigger:"blur"}]}}}),data:function(){return{info:{email:""}}},watch:{showModalRoomPwd:function(e){e&!this.Ginited&&(this.password="")}},mounted:function(){},methods:{doJoin:function(){var e=this;this.$refs["form1"].validate((function(t){t&&e.$ajax({url:"/api/user/complete/self",type:"put",params:e.info}).then((function(t){e.handleClose()}))}))},handleClose:function(){this.toggle(!1)},toggle:function(e){this.$store.commit("toggleModalFillInfo",e)}}},Fe=Ge,qe=Object(f["a"])(Fe,Ae,Ne,!1,null,null,null),Be=qe.exports,ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"dialog-buy-success",attrs:{visible:e.show,width:"5rem",title:e.$t("m.TransactionComplete"),"before-close":e.handleClose},on:{"update:visible":function(t){e.show=t}}},[a("div",{staticClass:"wrap"},[a("div",{staticClass:"wrap-coin"},[a("i",{staticClass:"coin"}),a("span",[e._v(e._s(e.coins)+" "+e._s(e.$t("m.coins")))])])]),a("el-button",{staticClass:"button button-big mgTop50",on:{click:e.handleClose}},[e._v(e._s(e.$t("m.DONE")))])],1)},Ue=[],We={props:{show:Boolean,coins:Number},data:function(){return{number:1}},methods:{handleClose:function(){this.$emit("close")},toggle:function(e){this.$emit("update:show",e)}}},He=We,Je=Object(f["a"])(He,ze,Ue,!1,null,null,null),Ve=Je.exports,Ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"dialog-message",attrs:{title:e.dataMessage.title,visible:e.showModalMessage,"before-close":e.handleClose,width:"4.3rem"},on:{"update:visible":function(t){e.showModalMessage=t}}},[a("p",{staticClass:"cnt"},[e._v(e._s(e.dataMessage.cnt))]),a("el-button",{staticClass:"mgTop18 button button-big",on:{click:e.handleClose}},[e._v("OK")])],1)},Ke=[],Qe={props:{},computed:Object(r["a"])(Object(r["a"])({},Object(c["c"])(["showModalMessage","dataMessage"])),Object(c["b"])(["reqSignin"])),data:function(){return{}},watch:{},mounted:function(){},methods:{handleClose:function(){this.toggle(!1)},toggle:function(e,t){this.$store.commit("toggleModalMessage",{flag:e,data:t})}}},Xe=Qe,Ze=Object(f["a"])(Xe,Ye,Ke,!1,null,null,null),et=Ze.exports,tt={components:{ModalMessage:et,ModalBuySuccess:Ve,ModalFillInfo:Be,ModalProfile:Le,FriendList:g,cFooter:I,cHeader:S,ModalSignin:N,ModalReset:U,ModalResetSuccess:K,ModalChangePwd:ae,ModalInfo:ve,ModalCreateAccount:_e},data:function(){return{changePwdCode:"",changePwdType:1,coinGot:100,showListFriend:!1,showModalBuySuccess:!1,timer:null}},created:function(){var e=this;this.testAjax(),this.$store.dispatch("checkLogined"),this.checkFriend(),this.$nextTick((function(t){window.addEventListener("message",(function(t){t.origin,t.data;switch(t.data.type){case"goBackHall":e.$router.push({path:"/main",query:{exitByGame:1}});break}console.log(t.data,"收到iframe的消息")}),!1)}))},computed:Object(r["a"])({url:function(){var e="./game/index.html";return"".concat(e,"?token=").concat(this.token,"&lang=").concat(this.$i18n.locale)}},Object(c["c"])(["logined","inGame","showRedPoint","token","userInfo"])),mounted:function(){this.checkRedirect()},methods:{onBuySuccess:function(){this.$store.dispatch("checkLogined"),this.showModalBuy=!1,this.showModalBuySuccess=!1},checkRedirect:function(){var e=this;if(this.userInfo.id){var t=+this.getQueryString("type");switch(t){case 10004:this.quickGoGame();break;case 1:this.quickPaySuccess();break;case 3:this.quickResetPwd();break}}else setTimeout((function(){e.checkRedirect()}),1e3)},quickResetPwd:function(){var e=this.getQueryString("code");this.changePwdType=2,this.changePwdCode=e,this.ModalChangePwd=!0,this.$store.commit("toggleModalChangePwd",!0)},quickPaySuccess:function(){var e=this,t=this.getQueryString("orderId");this.getQueryString("PayerID"),this.getQueryString("token");this.showModalBuySuccess=!0,this.$ajax({url:"/pay/captures/".concat(t),type:"post"}).then((function(t){e.coinGot=t.coin}))},quickGoGame:function(){var e=this,t=this.getQueryString("roomId"),a=this.getQueryString("roomPwd");"null"==a&&(a=null),this.$ajax({url:"/api/game/flow/".concat(this.userInfo.id,"/").concat(t,"/room/join"),type:"post",params:{roomPwd:a}}).then((function(t){e.$router.push("/game")}))},focusIframe:function(){console.log("focus in iframe"),window.iframe1.focus()},testAjax:function(){},checkFriend:function(){var e=this;clearInterval(this.timer),this.timer=setInterval((function(){e.$store.commit("freshFriendAll")}),3e3)},getQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),a=window.location.search.substr(1).match(t),s="";return null!=a&&(s=a[2]),t=null,a=null,null==s||""==s||"undefined"==s?"":s}}},at=tt,st=(s("034f"),Object(f["a"])(at,i,o,!1,null,null,null)),nt=st.exports,it=s("8c4f"),ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-home"},[a("div",{staticClass:"swiper-container"},[a("div",{staticClass:"swiper-wrapper"},e._l(3,(function(t){return a("div",{key:t,staticClass:"wrap1 swiper-slide"},[a("div",{staticClass:"title1"}),a("div",{staticClass:"cnt"},[e._v("Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod")]),e._m(0,!0),a("div",{staticClass:"button play"},[a("i",{staticClass:"play"}),a("span",{staticClass:"mgLeft6",on:{click:e.goGame}},[e._v("Play Now")])])])})),0),a("div",{staticClass:"swiper-pagination"})]),e._m(1)])},rt=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrap-btn"},[a("div",{staticClass:"button button1 no-touch"},[a("i",{staticClass:"multiplayer"}),a("span",{staticClass:"mgLeft6"},[e._v("Multplayer")])]),a("div",{staticClass:"button button1 no-touch"},[a("i",{staticClass:"time"}),a("span",{staticClass:"mgLeft6"},[e._v("120 Min")])]),a("div",{staticClass:"button button1 no-touch"},[a("i",{staticClass:"age"}),a("span",{staticClass:"mgLeft6"},[e._v("Ages 13+")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrap2"},[a("div",{staticClass:"mask"}),a("div",{staticClass:"title2"}),a("div",{staticClass:"line2"}),a("div",{staticClass:"rule"},[a("div",{staticClass:"video1"}),a("div",{staticClass:"rule2"})])])}],ct=(s("4480"),{name:"Home",components:{},activated:function(){},mounted:function(){},created:function(){this.$nextTick((function(e){new Swiper(".swiper-container",{loop:!0,pagination:".swiper-pagination",autoplay:3e3,paginationClickable:!0})}))},methods:{goPage:function(e){this.$router.push(e)},goGame:function(){this.$router.push("/maps")}}}),lt=ct,ut=Object(f["a"])(lt,ot,rt,!1,null,null,null),dt=ut.exports,mt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-room"},[a("div",{staticClass:"room-wrap"},[a("div",{staticClass:"area-left"},[a("div",{staticClass:"wrap-select"},[a("el-select",{staticStyle:{width:"120px"},attrs:{size:"small",placeholder:e.$t("m.Theme")},on:{change:e.doSearch},model:{value:e.searchData.tag,callback:function(t){e.$set(e.searchData,"tag",t)},expression:"searchData.tag"}},e._l(e.listTheme,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1),a("el-select",{staticStyle:{width:"120px"},attrs:{size:"small",placeholder:e.$t("m.Length")},on:{change:e.doSearch},model:{value:e.searchData.length,callback:function(t){e.$set(e.searchData,"length",t)},expression:"searchData.length"}},e._l(e.listLen,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1),a("el-select",{staticStyle:{width:"150px"},attrs:{size:"small",placeholder:e.$t("m.Difficulty")},on:{change:e.doSearch},model:{value:e.searchData.difficulty,callback:function(t){e.$set(e.searchData,"difficulty",t)},expression:"searchData.difficulty"}},e._l(e.listDifficult,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1),a("el-select",{staticStyle:{width:"110px"},attrs:{size:"small",placeholder:e.$t("m.Size")},on:{change:e.doSearch},model:{value:e.searchData.userLimit,callback:function(t){e.$set(e.searchData,"userLimit",t)},expression:"searchData.userLimit"}},e._l(e.listSize,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticClass:"wrap-checkbox mgTop18"},[a("el-checkbox",{model:{value:e.searchData.isPrivate,callback:function(t){e.$set(e.searchData,"isPrivate",t)},expression:"searchData.isPrivate"}},[e._v(e._s(e.$t("m.ShowPrivateGames")))]),a("el-checkbox",{model:{value:e.searchData.scheduled,callback:function(t){e.$set(e.searchData,"scheduled",t)},expression:"searchData.scheduled"}},[e._v(e._s(e.$t("m.ShowFutureGames")))])],1),a("el-table",{staticClass:"table mgTop18",attrs:{height:"2.9rem",size:"small",data:e.list}},[a("el-table-column",{attrs:{"min-width":"90",label:e.$t("m.Game"),prop:"roomName"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.roomName))]),t.row.scheduleTime?a("div",{staticClass:"tag-schedule"},[a("i",{staticClass:"el-icon-alarm-clock"}),e._v(" "+e._s(t.row.scheduleTime)+" ")]):e._e()]}}])}),a("el-table-column",{attrs:{"min-width":"80",label:e.$t("m.ID"),prop:"roomNum"}}),a("el-table-column",{attrs:{"min-width":"80",label:e.$t("m.Theme"),prop:"gameTag"}}),a("el-table-column",{attrs:{"min-width":"70",label:e.$t("m.Difficulty"),prop:"gameDifficulty"}}),a("el-table-column",{attrs:{"min-width":"60",label:e.$t("m.Length"),prop:"gameLength"}}),a("el-table-column",{attrs:{"min-width":"50",label:e.$t("m.Size"),prop:"userLimit"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.userLive)+"/"+e._s(t.row.userLimit))]}}])}),a("el-table-column",{attrs:{label:"","min-width":"75"},scopedSlots:e._u([{key:"default",fn:function(t){return["schedule"==t.row.type?a("div",{staticClass:"button-join",on:{click:function(a){return e.scheduleGame(t.row)}}},[a("i",{staticClass:"join"}),a("span",[e._v(e._s(e.$t("m.Schedule")))])]):a("div",{staticClass:"button-join",on:{click:function(a){return e.joinGame(t.row)}}},[a("i",{staticClass:"join"}),e._v(" "+e._s(e.$t("m.Join"))+" ")])]}}])})],1),a("el-pagination",{staticClass:"mgTop18 floatLeft",attrs:{"current-page":e.pageData1.pageNo,layout:"total, prev, pager, next, jumper",total:e.pageData1.total},on:{"current-change":e.doSearch}})],1),a("div",{staticClass:"area-right"},[a("div",{staticClass:"wrap-select"},[a("el-input",{attrs:{placeholder:"Find Room"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSearch(t)}},model:{value:e.searchData.name,callback:function(t){e.$set(e.searchData,"name",t)},expression:"searchData.name"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),a("div",{staticClass:"btn",on:{click:function(t){return e.createGame(!1)}}},[e._v(e._s(e.$t("m.CreateGame")))]),a("div",{staticClass:"btn",on:{click:function(t){return e.createGame(!0)}}},[a("i",{staticClass:"game"}),e._v(" "+e._s(e.$t("m.ScheduleAGame"))+" ")])],1),a("div",{staticClass:"wrap-checkbox mgTop18"},[a("p",{staticClass:"txt-lighter txt-bold"},[e._v(e._s(e.$t("m.MyScheduledGames")))])]),a("el-table",{staticClass:"table mgTop18",attrs:{height:"2.9rem",size:"small",data:e.listSelf}},[a("el-table-column",{attrs:{"min-width":"100",label:e.$t("m.Game"),prop:"roomName"}}),a("el-table-column",{attrs:{"min-width":"80",label:e.$t("m.StartTime"),prop:"scheduleTime"}}),a("el-table-column",{attrs:{"min-width":"60",label:e.$t("m.Size"),prop:"userLimit"}}),a("el-table-column",{attrs:{"min-width":"70",label:e.$t("m.Difficulty"),prop:"gameDifficulty"}}),a("el-table-column",{attrs:{"min-width":"70",label:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"button-join",on:{click:function(a){return e.joinGame(t.row)}}},[a("i",{staticClass:"join"}),e._v(" "+e._s(e.$t("m.Join"))+" ")]),a("div",{staticClass:"button-join",on:{click:function(a){return e.cancelSchdule(t.row)}}},[a("i",{staticClass:"door"}),e._v(" "+e._s(e.$t("m.Cancel"))+" ")])]}}])})],1)],1)]),a("modal-room-pwd",{attrs:{show:e.showRoomPwd},on:{"update:show":function(t){e.showRoomPwd=t},enterPsw:e.pswEntered}})],1)},ht=[],ft=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"modal-signin",attrs:{title:e.$t("m.EnterRoomPwd"),visible:e.show,"before-close":e.handleClose,width:"5rem"}},[a("el-form",[a("el-input",{attrs:{placeholder:e.$t("m.PASSWORD")},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}),a("el-button",{staticClass:"mgTop18 button button-big",on:{click:e.doJoin}},[e._v(e._s(e.$t("m.Join")))])],1)],1)},pt=[],gt={props:{show:Boolean},computed:Object(r["a"])(Object(r["a"])({},Object(c["c"])([,"selectedRoomData"])),Object(c["b"])(["reqSignin"])),data:function(){return{inputValue:""}},watch:{show:function(){this.show&&(this.inputValue="")}},mounted:function(){},methods:{doJoin:function(){this.$emit("enterPsw",this.inputValue),this.handleClose()},handleClose:function(){this.toggle(!1)},toggle:function(e){this.$emit("update:show",e)}}},bt=gt,vt=Object(f["a"])(bt,ft,pt,!1,null,null,null),wt=vt.exports,yt=(s("e7b3"),{components:{ModalRoomPwd:wt},computed:Object(r["a"])({},Object(c["c"])(["listDifficult","listSize","listTheme","listLen","userInfo"])),data:function(){return{showRoomPwd:!1,listSelf:[],list:[],searchData:{scheduled:!0,isPrivate:!0,pageNo:1,pageSize:20},selRoom:{},pageData1:{pageNo:1,pageSize:20}}},activated:function(){this.doSearch(),this.getSelfGames()},mounted:function(){this.doSearch(),this.getSelfGames()},methods:{cancelSchdule:function(e){var t=this;this.$ajax({url:"/api/room/schedule/cancel/".concat(e.id),type:"post"}).then((function(e){t.doSearch(),t.getSelfGames()}))},scheduleGame:function(e){var t=this;this.$ajax({url:"/api/game/flow/".concat(this.userInfo.id,"/").concat(e.id,"/room/schedule"),type:"post"}).then((function(e){t.doSearch(),t.getSelfGames()})).catch((function(e){}))},checkWithWrongPsw:function(){e.enMsg},pswEntered:function(e){this.joinGame(this.selRoom,e)},joinGame:function(e,t){var a=this;0!=e.publicFlag?this.$ajax({url:"/api/game/flow/".concat(this.userInfo.id,"/").concat(e.id,"/room/join"),type:"post"}).then((function(e){a.$router.push("/game")})):t?this.$ajax({url:"/api/game/flow/".concat(this.userInfo.id,"/").concat(e.id,"/room/join"),type:"post",params:{roomPwd:t}}).then((function(e){a.$router.push("/game")})):(this.showRoomPwd=!0,this.selRoom=e)},createGame:function(e){this.$router.push({path:"/maps",query:{subTitle:"Select a Map",createGame:1,isSchdule:e?1:0}})},doSearch:function(e){var t=this;console.log(e),this.$ajax({url:"/api/room/list",type:"post",params:this.searchData}).then((function(e){t.list=e.list,t.pageData1=e.pageInfo}))},getSelfGames:function(){var e=this;this.$ajax({url:"/api/room/my/scheduled/list",type:"get"}).then((function(t){e.listSelf=t}))}}}),Ct=yt,kt=Object(f["a"])(Ct,mt,ht,!1,null,null,null),St=kt.exports,_t=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-store"},[a("div",{staticClass:"store-wrap"},[a("p",{staticClass:"title"},[e._v(e._s(e.$t("m.Coins")))]),a("div",{staticClass:"wrap-list"},e._l(e.list,(function(t,s){return a("div",{key:s,staticClass:"item",on:{click:function(a){return e.goBuy(t)}}},[a("i",{staticClass:"coin"}),a("p",{staticClass:"name"},[e._v(e._s(t.coin)+" "+e._s(e.$t("m.coins")))]),a("p",{staticClass:"num"},[e._v("$"+e._s(t.money))]),a("div",{staticClass:"border-selected"})])})),0)]),a("modal-buy",{attrs:{show:e.showModalBuy,conf:e.selectedConf},on:{close:function(t){e.showModalBuy=!1},"update:show":function(t){e.showModalBuy=t},openPayWay:e.onOpenPayWay}}),a("modal-buy-way",{attrs:{show:e.showModalBuyWay,conf:e.selectedConf,number:e.number},on:{paySuccess:e.onPaySuccess,close:function(t){e.showModalBuyWay=!1},"update:show":function(t){e.showModalBuyWay=t}}})],1)},$t=[],jt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"dialog-buy",attrs:{visible:e.show,width:"5rem",title:e.$t("m.Purchase"),"before-close":e.handleClose},on:{"update:visible":function(t){e.show=t}}},[a("div",{staticClass:"wrap"},[a("el-input",{model:{value:e.number,callback:function(t){e.number=t},expression:"number"}}),a("span",{staticClass:"x"},[e._v("x")]),a("div",{staticClass:"wrap-coin"},[a("i",{staticClass:"coin"}),a("span",[e._v(e._s(e.conf.coin*e.number)+" "+e._s(e.$t("m.coins")))])])],1),a("template",{slot:"footer"},[a("el-button",{staticClass:"button button0",attrs:{type:"primary"},on:{click:e.handleClose}},[e._v(e._s(e.$t("m.Cancel")))]),a("el-button",{staticClass:"button",on:{click:e.toDoPay}},[e._v(e._s(e.$t("m.USD2")))])],1)],2)},Pt=[];function Mt(e){return new Promise((function(t,a){ajax({url:"/pay/getToken",type:"post"}).then((function(a){It(a,e).then((function(e){t(e)}))}))}))}function It(e,t){return new Promise((function(a,s){braintree.client.create({authorization:e},(function(e,n){e?console.error("Error creating client:",e):braintree.paypalCheckout.create({client:n},(function(e,n){e&&console.error("Error creating paypalCheckoutInstance:",e),n.loadPayPalSDK({currency:"USD",intent:"capture"},(function(){t.onBtnCreated&&t.onBtnCreated(),paypal.Buttons({fundingSource:paypal.FUNDING.PAYPAL,createOrder:function(){return t.onOrderCreated&&t.onOrderCreated(),n.createPayment(t.brainTree)},onApprove:function(e,i){return n.tokenizePayment(e,(function(e,n){ajax({url:"/pay/".concat(n.nonce),type:"post",params:t}).then((function(e){a(e)})).catch((function(e){s(null)}))}))},onCancel:function(e){console.log("PayPal payment cancelled",JSON.stringify(e,0,2)),s(null)},onError:function(e){console.error("PayPal error",e),s(null)}}).render("#paypal-button").then((function(){T()("#paypal-button").click()}))}))}))}))}))}var Rt={props:{show:Boolean,conf:Object},data:function(){return{number:1}},watch:{show:function(e){e&&console.log(this.conf)}},methods:{initData:function(){},toDoPay:function(){var e=this,t=this.$loading({background:"rgba(0,0,0,.8)"}),a=this.conf.id;this.$ajax({url:"/pay/order/".concat(a),type:"get",params:{productId:a,num:this.number}}).then((function(a){console.log(a,"eeee"),e.doPayPal(a).then((function(e){t.close()})).catch((function(e){t.close()}))})).catch((function(e){t.close()}))},doPayPal:function(e){return this.$ajax({url:"/pay",type:"post",params:e}).then((function(e){location.href=e}))},toggle:function(e){this.$emit("input:show",e)},handleClose:function(){this.$emit("close")}}},xt=Rt,Ot=Object(f["a"])(xt,jt,Pt,!1,null,null,null),Dt=Ot.exports,Tt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"dialog-buy",attrs:{visible:e.show,width:"5rem",title:e.$t("m.PurchaseWay"),"before-close":e.handleClose},on:{"update:visible":function(t){e.show=t}}},[a("div",{attrs:{id:"paypal-button"}})])},Et=[],Lt={props:{show:Boolean,conf:Object,number:Number},data:function(){return{}},watch:{show:function(e){}},methods:{handleClose:function(){this.$emit("close")},initData:function(){},toDoPay:function(){var e=this,t=this.conf.id,a=this.$loading({background:"rgba(0,0,0,.8)"});this.$ajax({url:"/pay/order/".concat(t),type:"get",params:{productId:t,num:this.number}}).then((function(t){t.onBtnCreated=function(){a.close()},t.onOrderCreated=function(){a.close(),a=e.$loading({background:"rgba(0,0,0,.8)"})},Mt(t).then((function(t){a.close(),e.paySuccess()})).catch((function(e){a.close()}))}))},paySuccess:function(){this.handleClose(),this.$emit("paySuccess",this.conf.coin*this.number)},toggle:function(e){this.$emit("input:show",e)}}},At=Lt,Nt=Object(f["a"])(At,Tt,Et,!1,null,null,null),Gt=Nt.exports,Ft=(s("35e5"),{components:{ModalBuy:Dt,ModalBuyWay:Gt},data:function(){return{coinGot:0,showModalBuyWay:!1,selectedConf:{},showModalBuy:!1,list:[],number:0}},activated:function(){this.initData()},mounted:function(){this.initData()},methods:{onOpenPayWay:function(e){this.showModalBuyWay=!0,this.number=+e},onPaySuccess:function(e){this.coinGot=e},goBuy:function(e){this.showModalBuy=!0,this.selectedConf=e},initData:function(){var e=this;this.$ajax({url:"/product/list",type:"get"}).then((function(t){e.list=t}))}}}),qt=Ft,Bt=Object(f["a"])(qt,_t,$t,!1,null,null,null),zt=Bt.exports,Ut=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-map"},[a("div",{staticClass:"map-wrap"},[e._e(),a("div",{staticClass:"wrap-list"},e._l(e.list,(function(t,s){return a("div",{key:s,staticClass:"item",on:{click:function(a){return e.goDetail(t)}}},[a("i",{staticClass:"title"},[e._v(e._s(t.gameName))]),t.gameTag?a("div",{staticClass:"wrap-tags"},e._l(t.gameTag.split(","),(function(t,s){return a("span",{key:s,staticClass:"tag"},[e._v(e._s(t))])})),0):e._e(),a("div",{staticClass:"img-wrap"},[a("img",{attrs:{src:t.gamePicture,alt:""}})]),a("div",{staticClass:"cnt"},[e._v(e._s(t.gameDesc))]),a("div",{staticClass:"coin-wrap"},[a("i",{staticClass:"coin"}),a("span",[e._v(e._s(t.gamePrice))])])])})),0)])])},Wt=[],Ht=(s("d714"),{components:{},computed:Object(r["a"])({},Object(c["c"])(["listDifficult","listSize","listTheme","listLen"])),data:function(){return{searchData:{},list:[]}},mounted:function(){this.initData()},activated:function(){this.initData()},methods:{doSearch:function(){},initData:function(){var e=this;this.$ajax({url:"/api/gs/list",type:"get",params:{}}).then((function(t){e.list=t}))},goDetail:function(e){var t=this.$route.query,a={isSchdule:t.isSchdule||0,createGame:t.createGame||0,mapId:e.id};1==this.$route.query.createGame?a.subTitle="Create Game":a.subTitle="Map Detail",this.$router.push({path:"/mapDetail",query:a})}}}),Jt=Ht,Vt=Object(f["a"])(Jt,Ut,Wt,!1,null,null,null),Yt=Vt.exports,Kt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-detail"},[a("div",{staticClass:"detail-wrap"},[a("div",{staticClass:"wrap-password"},[a("el-checkbox",{model:{value:e.createData.isPrivate,callback:function(t){e.$set(e.createData,"isPrivate",t)},expression:"createData.isPrivate"}},[e._v("Private Game")]),e.createData.isPrivate?a("el-input",{attrs:{size:"small",placeholder:"Set passcode"},model:{value:e.createData.roomPwd,callback:function(t){e.$set(e.createData,"roomPwd",t)},expression:"createData.roomPwd"}}):e._e()],1),a("div",{staticClass:"wrap-img"},[a("img",{attrs:{src:e.data.gamePicture,alt:""}})]),a("div",{staticClass:"wra-cnt"},[a("p",{staticClass:"title"},[e._v(e._s(e.data.gameName))]),e.data.gameTag?a("div",{staticClass:"wrap-tags"},e._l(e.data.gameTag.split(","),(function(t,s){return a("span",{key:s,staticClass:"tag"},[e._v(e._s(t))])})),0):e._e(),a("div",{staticClass:"cnt mgTop18"},[e._v(e._s(e.data.gameDesc))]),a("div",{staticClass:"cnt mgTop18 cnt2"},[e._v(e._s(e.data.scriptContent))]),e.isSchdule?a("el-date-picker",{staticClass:"date-picker border-lighter",attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期","picker-options":e.expireTimeOption},model:{value:e.createData.scheduleTime1,callback:function(t){e.$set(e.createData,"scheduleTime1",t)},expression:"createData.scheduleTime1"}}):e._e(),e.createData.scheduleTime1?a("el-time-picker",{staticClass:"mgTop18 date-picker border-lighter",attrs:{format:"HH:mm:ss","value-format":"HH:mm:ss",placeholder:"选择时间","picker-options":e.timePickerOption},model:{value:e.createData.scheduleTime2,callback:function(t){e.$set(e.createData,"scheduleTime2",t)},expression:"createData.scheduleTime2"}}):e._e(),a("div",{staticClass:"wrap-btn"},[e.createGame?[a("div",{staticClass:"button",on:{click:function(t){return e.beforeCreate("aa")}}},[a("i",{staticClass:"coin"}),e._v(" 50 for 1 ")]),a("div",{staticClass:"button button0",on:{click:function(t){return e.beforeCreate("all")}}},[a("i",{staticClass:"coin"}),e._v(" 200 for all players ")])]:[a("div",{staticClass:"button",on:{click:function(t){return e.goCreateGame(!1)}}},[e._v("Create Game")]),a("div",{staticClass:"button button0",on:{click:function(t){return e.goCreateGame(!0)}}},[e._v("Schedule game")])]],2),a("p",{staticClass:"cnt mgTop28"},[e._v("sadasdasd")])],1)]),a("modal-pay-check",{attrs:{payWay:this.createData.paymentType,show:e.showPayCheck,info:e.data},on:{"update:show":function(t){e.showPayCheck=t},doCreate:e.doCreateGame}}),a("modal-pay-not-enough",{attrs:{show:e.showNoMoney},on:{"update:show":function(t){e.showNoMoney=t}}})],1)},Qt=[],Xt=(s("8b1b"),s("c1df")),Zt=s.n(Xt),ea=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"dialog-pay-check",attrs:{title:e.$t("m.Purchase"),visible:e.show,"before-close":e.handleClose,width:"6rem"},on:{"update:visible":function(t){e.show=t}}},[a("div",{staticClass:"inner"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:e.info.gamePicture,alt:""}})]),a("p",{staticClass:"cnt"},[e._v(" "+e._s(e.info.gameName)+" "),"aa"==e.payWay?[a("br"),e._v(" "+e._s(e.$t("m.payForSelf"))+" ")]:e._e(),"all"==e.payWay?[a("br"),e._v(" "+e._s(e.$t("m.payForAll"))+" ")]:e._e()],2)]),a("div",{staticClass:"wrap-btn"},[a("div",{staticClass:"button",on:{click:e.handleClose}},[e._v("Cancel")]),a("div",{staticClass:"button button0",on:{click:function(t){return e.doCreateGame()}}},[a("i",{staticClass:"coin"}),e._v(" "+e._s("aa"==e.payWay?50:200)+" ")])])])},ta=[],aa={props:{show:Boolean,payWay:String,info:{type:Object,default:function(){return{}}}},computed:{},data:function(){return{}},watch:{},mounted:function(){},methods:{doCreateGame:function(){this.$emit("doCreate")},handleClose:function(){this.toggle(!1)},toggle:function(e){this.$emit("update:show",e)}}},sa=aa,na=Object(f["a"])(sa,ea,ta,!1,null,null,null),ia=na.exports,oa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"dialog-pay-check",attrs:{title:e.$t("m.PurchaseFailed"),visible:e.show,"before-close":e.handleClose,width:"4.3rem"},on:{"update:visible":function(t){e.show=t}}},[a("p",{staticClass:"cnt"},[e._v(e._s(e.$t("m.PurchaseFailedCnt")))]),a("div",{staticClass:"wrap-btn"},[a("div",{staticClass:"button button0",on:{click:e.handleClose}},[e._v(e._s(e.$t("m.Cancel")))]),a("div",{staticClass:"button",on:{click:function(t){return e.goShop()}}},[e._v(e._s(e.$t("m.goShop")))])])])},ra=[],ca={props:{show:Boolean},computed:{},data:function(){return{}},watch:{},mounted:function(){},methods:{goShop:function(){this.handleClose(),this.$router.push({path:"/store"})},handleClose:function(){this.toggle(!1)},toggle:function(e,t){this.$emit("update:show",e)}}},la=ca,ua=Object(f["a"])(la,oa,ra,!1,null,null,null),da=ua.exports,ma={components:{ModalPayCheck:ia,ModalPayNotEnough:da},computed:Object(r["a"])(Object(r["a"])({},Object(c["c"])(["userInfo"])),{},{createGame:function(){return!!+this.$route.query.createGame},isSchdule:function(){return!!+this.$route.query.isSchdule},mapId:function(){return this.$route.query.mapId}}),watch:{createData:function(){var e=new Date,t=e.toString().substr(0,15)===new Date(this.createData.scheduleTime1).toString().substr(0,15);this.timePickerOption=t?{selectableRange:"".concat(Zt()().format("HH:mm:ss"),"-23:59:59")}:{}}},data:function(){return{showNoMoney:!1,showPayCheck:!1,timePickerOption:{},expireTimeOption:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}},date:"",createData:{publicFlag:1},list:[{}],data:{}}},mounted:function(){this.getDetail()},activated:function(){this.getDetail()},methods:{getDetail:function(){var e=this;this.$ajax({url:"/api/gs/info",type:"get",params:{id:this.mapId}}).then((function(t){e.data=t,e.createData={publicFlag:1}}))},beforeCreate:function(e){this.createData.paymentType=e,this.showPayCheck=!0},doCreateGame:function(){var e=this;if(this.showPayCheck=!1,this.createData.roomName="".concat(this.$store.getters.userInfo.username,"'s room"),this.createData.gsId=this.mapId,this.createData.publicFlag=this.createData.isPrivate?0:1,this.isSchdule){if(!this.createData.scheduleTime1||!this.createData.scheduleTime2)return void this.$message(this.$t("m.chooseTime"));this.createData.scheduleTime=this.createData.scheduleTime1+" "+this.createData.scheduleTime2}this.createData.isPrivate||(this.createData.roomPwd=null);var t="all"==this.createData.paymentType?200:50;this.userInfo.money<t?this.showNoMoney=!0:this.$ajax({url:"/api/room/create",type:"post",params:this.createData}).then((function(t){e.isSchdule?(e.$store.commit("toggleModalMessage",{flag:!0,data:{title:e.$t("m.createRoomSuccessTitle"),cnt:e.$utils.getTxtByType(e.$t("m.createRoomSuccessCnt"),{roomId:t.room.id,time:e.createData.scheduleTime})}}),e.$store.dispatch("checkLogined"),e.$router.push("/room")):e.doJoinGame(t.room.id)}))},doJoinGame:function(e){var t=this;this.$ajax({url:"/api/game/flow/".concat(this.userInfo.id,"/").concat(e,"/room/join"),type:"post",params:this.createData}).then((function(e){t.$store.dispatch("checkLogined"),t.$router.push("/game")}))},goCreateGame:function(e){this.$router.push({path:"/mapDetail",query:{isSchdule:e?1:0,createGame:1,mapId:1,subTitle:"Create Game"}})},goDetail:function(e){}}},ha=ma,fa=Object(f["a"])(ha,Kt,Qt,!1,null,null,null),pa=fa.exports;n["default"].use(it["a"]);var ga=[{path:"/",redirect:"/main"},{path:"/main",name:"Home",component:dt},{path:"/room",name:"Room",component:St},{path:"/store",name:"Store",component:zt},{path:"/maps",name:"Map",component:Yt},{path:"/mapDetail",name:"MapDetail",component:pa}],ba=new it["a"]({mode:"hash",base:"/",routes:ga});ba.beforeEach((function(e,t,a){var s="/game"==e.path;window["flexibleScrollable"]!=s&&(window["flexibleScrollable"]=s,window["nDesignWid1"]=s?1920:1440,window["nDesignHei1"]=s?1080:900,window.dispatchEvent(new Event("resize"))),"/game"==t.path?e.query.exitByGame?a():a("/game"):a()}));var va=ba,wa={state:function(){return{showModalSignin:!1,showModalReset:!1,showModalResetSuccess:!1,showModalChangePwd:!1,showModalInfo:!1,showModalCreateAccount:!1,showModalProfile:!1,showModalFillInfo:!1,showModalMessage:!1,dataMessage:{title:"",cnt:""},currentModalData:{},selectedRoomData:{}}},mutations:{setSelectedRoom:function(e,t){e.selectedRoomData=t},toggleModalMessage:function(e,t){var a=t.flag,s=t.data;s&&(e.dataMessage=s),e.showModalMessage=a},toggleModalProfile:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.showModalProfile=t},toggleModalSignin:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.showModalSignin=t},toggleModalReset:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.showModalReset=t},toggleModalResetSuccess:function(e,t){var a=t.flag,s=t.email;e.currentModalData={email:s},e.showModalResetSuccess=a},toggleModalChangePwd:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.showModalChangePwd=t},toggleModalInfo:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.showModalInfo=t},toggleModalFillInfo:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.showModalFillInfo=t},toggleModalCreateAccount:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.showModalCreateAccount=t}},actions:{},getters:{currentModalData:function(e){return e.currentModalData},showModalFillInfo:function(e){return e.showModalFillInfo},selectedRoomData:function(e){return e.selectedRoomData},showModalSignin:function(e){return e.showModalSignin},showModalProfile:function(e){return e.showModalProfile},showModalReset:function(e){return e.showModalReset},showModalResetSuccess:function(e){return e.showModalResetSuccess},showModalChangePwd:function(e){return e.showModalChangePwd},showModalInfo:function(e){return e.showModalInfo},showModalCreateAccount:function(e){return e.showModalCreateAccount},showModalMessage:function(e){return e.showModalMessage},dataMessage:function(e){return e.dataMessage}}},ya={state:function(){return{userInfo:{},token:"",inGame:!0,statistics:{},gameScripts:[],gameHistories:[]}},mutations:{setStatistics:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.statistics=t},setUserInfo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.userInfo=t,console.log(t,"infoooooo")},setToken:function(e,t){localStorage.setItem("token",t),e.token=t}},actions:{doLogOut:function(e,t){var a=e.commit;e.state;a("setToken",""),a("setUserInfo",{})},loginFacebook:function(e,t){e.commit,e.state;FB.init({appId:"your-app-id",autoLogAppEvents:!0,xfbml:!0,version:"v10.0"}),FB.login((function(e){}))},checkLogined:function(e,t){var a=e.commit,s=e.state,n=localStorage.getItem("token");if(n)return a("setToken",n),ajax({url:"/api/user/self",type:"get",params:{}}).then((function(e){Sa.commit("toggleModalSignin",!1);var t=1==e.user.sysUser.needComplete;t&&a("toggleModalFillInfo",!0),a("setUserInfo",e.user),s.gameHistories=e.gameHistories,s.gameScripts=e.gameScripts,a("setStatistics",e.statistics),e.gaming&&va.push("/game")})).catch((function(e){a("setToken","")}))},reqSignin:function(e,t){var a=e.commit,s=(e.state,t.username),n=t.password;return ajax({url:"/login?remember-me=true",type:"POST",params:{username:s,password:n}}).then((function(e){a("setUserInfo",e.user),a("setToken",e.token),Sa.dispatch("checkLogined")}))},checkLoginByGoogle:function(e,t){return Object(O["a"])(regeneratorRuntime.mark((function a(){var s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=e.commit,e.state,a.next=3,ajax({url:"/google/login",type:"POST",params:t});case 3:n=a.sent,s("setUserInfo",n.user),s("setToken",n.token);case 6:case"end":return a.stop()}}),a)})))()},checkLoginByFacebook:function(e,t){return Object(O["a"])(regeneratorRuntime.mark((function a(){var s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=e.commit,e.state,a.next=3,ajax({url:"/facebook/login",type:"POST",params:{userToken:t.userToken,userId:t.userId}});case 3:n=a.sent,s("setToken",n.token),Sa.dispatch("checkLogined");case 6:case"end":return a.stop()}}),a)})))()}},getters:{gameScripts:function(e){return e.gameScripts},gameHistories:function(e){return e.gameHistories},userInfo:function(e){return e.userInfo},token:function(e){return e.token},logined:function(e){return e.userInfo.username},inGame:function(e){return e.inGame},statistics:function(e){return e.statistics}}},Ca={state:function(){return{listDifficult:[{label:"easy",value:"easy"},{label:"hard",value:"hard"},{label:"very hard",value:"very hard"}],listSize:[{label:"2 players",value:2},{label:"4 players",value:4},{label:"6 players",value:6},{label:"8 players",value:8}],listLen:[{label:"1 hour",value:"1 hour"},{label:"1.5 hour",value:"1.5 hour"},{label:"2 hour",value:"2 hour"},{label:"2.5 hour",value:"2.5 hour"}],listTheme:[{label:"Modern",value:"Modern"},{label:"Other",value:"Other"}]}},mutations:{},actions:{},getters:{listDifficult:function(e){return e.listDifficult},listSize:function(e){return e.listSize},listLen:function(e){return e.listLen},listTheme:function(e){return e.listTheme}}},ka={state:function(){return{listRequest:[],listFriend:[],page:1,pageSize:50}},mutations:{freshFriendAll:function(e){Sa.getters.token&&(Sa.dispatch("freshFriendList"),Sa.dispatch("freshRequestList"))}},actions:{freshRequestList:function(e){e.commit;var t=e.state;ajax({url:"/api/friend/requests",type:"get"}).then((function(e){t.listRequest=e}))},freshFriendList:function(e,t){e.commit;var a=e.state;return ajax({url:"/api/friend",type:"get",params:{pageNo:a.page,pageSize:a.pageSize}}).then((function(e){console.log(e,"frienddata"),a.listFriend=e.list}))}},getters:{listFriend:function(e){return e.listFriend},listRequest:function(e){return e.listRequest},showRedPoint:function(e){return e.listRequest.length>0||e.listFriend.find((function(e){return e.flag}))}}};n["default"].use(c["a"]);var Sa=new c["a"].Store({state:{},mutations:{},actions:{},modules:{ui:wa,user:ya,dictionary:Ca,friend:ka}}),_a=(s("fa6d"),s("455b"),s("5720"),100),$a=1440,ja=900,Pa=!1,Ma=0,Ia=0,Ra=0,xa="",Oa=document.getElementsByName("viewport")[0],Da=document.documentElement,Ta=document.getElementsByTagName("head"),Ea=document.getElementsByName("fitsetting")[0],La=(window.navigator.appVersion.match(/android/gi),window.navigator.appVersion.match(/iphone/gi)),Aa=window.devicePixelRatio;if(Ia=La?Aa>=3&&(!Ia||Ia>=3)?3:Aa>=2&&(!Ia||Ia>=2)?2:1:1,Ea){var Na=Ea.getAttribute("content"),Ga=Na.match(/width=([\d\.]+)/),Fa=Na.match(/height=([\d\.]+)/),qa=Na.match(/mode=([\d\.]+)/),Ba=Na.match(/scale=([\d\.]+)/);$a=Ga?+Ga[1]:$a,ja=Fa?+Fa[1]:ja,Pa=qa?+qa[1]:Pa,Ma=Ba&&0!=Ba?+Ba[1]:Ma}Ra=0==Ma?1/Ia:Ma,Ia=0==Ma?Ia:1/Ra,xa="initial-scale="+Ra+", maximum-scale="+Ra+", minimum-scale="+Ra+', user-scalable=no, shrink-to-fit="no"',window["windowScale"]=Ra,Da.setAttribute("data-dpr",Ia),Oa?Oa.setAttribute("content",xa):Ta?(Oa=doc.createElement("meta"),Oa.setAttribute("name","viewport"),Oa.setAttribute("content",xa),Ta.appendChild(metaEl)):console.error("页面缺少<head>标签，自适应失败");var za=0,Ua=0,Wa=function(e,t,a){if($a=window["nDesignWid1"]||$a,ja=window["nDesignHei1"]||ja,void 0!=window["flexibleScrollable"]&&(Pa=window["flexibleScrollable"]),a){var s=[Ua,za];za=s[0],Ua=s[1]}var n=Da.getBoundingClientRect(),i=e||za||n.width,o=t||Ua||n.height;za=e,Ua=t;var r=o/i<ja/$a?o/ja:i/$a;Pa||(i<1440&&(i=1440),i>1980&&(i=1980),r=i/$a),Da.style.fontSize=r*_a+"px"},Ha=s("5c96");n["default"].use(Ha["TimePicker"]),n["default"].use(Ha["TimeSelect"]),n["default"].use(Ha["Tag"]),n["default"].use(Ha["Button"]),n["default"].use(Ha["Avatar"]),n["default"].use(Ha["Select"]),n["default"].use(Ha["Dialog"]),n["default"].use(Ha["Form"]),n["default"].use(Ha["FormItem"]),n["default"].use(Ha["Input"]),n["default"].use(Ha["DatePicker"]),n["default"].use(Ha["Checkbox"]),n["default"].use(Ha["Option"]),n["default"].use(Ha["Table"]),n["default"].use(Ha["TableColumn"]),n["default"].use(Ha["Pagination"]),n["default"].use(Ha["Loading"].directive),n["default"].prototype.$loading=Ha["Loading"].service,n["default"].prototype.$confirm=Ha["MessageBox"].confirm,n["default"].prototype.$message=Ha["Message"];s("581a");var Ja=s("bc3a"),Va=s.n(Ja),Ya=Va.a.create({headers:{"Content-Type":"application/json; charset=utf-8","X-Requested-With":"XMLHttpRequest"}});function Ka(e){var t=e.url,a=e.params,s=void 0===a?{}:a,n=e.type,i=void 0===n?"get":n,o=e.noPop,r=void 0!==o&&o,c=e.useForm,l=void 0!==c&&c,u=e.headers,d=void 0===u?{}:u;return-1==t.indexOf("http")&&(t="https://www.theclueonline.com/app"+t),new Promise((function(e,a){d["X-AUTH-TOKEN"]=Sa.getters.token;var n=va.app.$i18n.locale;d["language"]=n,i=i.toLowerCase();var o={method:i,url:t,headers:d};if(l){var c=new FormData;for(var u in s)c.append(u,s[u]);o.headers["content-type"]="multipart/form-data",o.data=c}else"post"==i?o.data=s:("get"==i||(o.data=s),o.params=s);Ya(o).then((function(t){0==t.data.code?e(t.data.data):401==t.data.code?(Sa.commit("setToken",""),va.push("/"),Sa.commit("toggleModalSignin",!0)):(!r&&t.data.msg&&("en-US"==n?Object(Ha["Message"])(t.data.msg):Object(Ha["Message"])(t.data.enMsg)),a(t.data))})).catch((function(e){console.warn("接口错误",e),a({})}))}))}var Qa,Xa={getTxtByType:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var a in t)e=e.replace(new RegExp("{".concat(a,"}"),"gm"),t[a]);return e}},Za=s("a925"),es=s("4897"),ts=s.n(es),as=s("b2d6"),ss=s.n(as);Wa(),window.addEventListener("resize",(function(){clearTimeout(Qa),Qa=setTimeout(Wa,300)}),!1),n["default"].config.productionTip=!1,window.ajax=Ka,n["default"].prototype.$ajax=Ka,window.utils=Xa,n["default"].prototype.$utils=Xa,n["default"].use(Za["a"]);var ns=new Za["a"]({local:"en-US",messages:{"en-US":s("6c23"),"zh-CN":s("756e")}});n["default"].prototype.$lang=ns,ts.a.use(ss.a),new n["default"]({router:va,store:Sa,i18n:ns,render:function(e){return e(nt)}}).$mount("#app")},"581a":function(e,t,a){},"6c23":function(e,t,a){"use strict";a.r(t),a.d(t,"m",(function(){return i}));var s,n=a("ade3"),i=(s={goShop:"Purchase Coins",payForSelf:"pay for myself",payForAll:"pay for all",PurchaseFailedCnt:"You dont’s have enough game coins",PurchaseFailed:"Purchase Failed",createRoomSuccessTitle:"Purchase Succeed",createRoomSuccessCnt:"Your Game（#{roomId}）has been scheduled for {time}",refundSuccessTitle:"Refund Requested",refundSuccessCnt:"You should be receive your refund in 3 days",chooseTime:"Please choose schedule time",en:"EN",ch:"CH",PswNotSame:"password not same",RequireEmail:"please enter your email",Require:"required",RequirePassword:"require password",RequireUsername:"require username",lengthMoreThan6:"length more than 6",lengthMoreThan3:"length more than 3",FillInfo:"Fill Info",EnterRoomPwd:"Room Password",BackSignPage:"BACK TO SIGN IN PAGE",Resend:"Resend Email",ResetEmailSend:"We've emailed password-reset link to your email,if it doesn't arrive soon,click the resend email button to request the link again.",EnterEmailToReset:"Enter the email address that you used to register,We'll send you an email with a link to reset your password.",RequestRefund:"Request refund",AllGamesPlayed:"All Games Played",Late3:"Last 3 games",NoShows:"No Shows",Ganselied:"Late Cancellation",GamesWon:"Games Won",GamesPlayed:"Games Played",PaymentHistory:"Payment History",GameStats:"Game stats",EditProfile:"Edit Profile",AlreadyHaveAccount:"ALREADY HAVE ACCOUNT?",LetsGo:"Let‘s Go",FinishAndEnJoy:"Now get ready and enjoy the games",BACK:"BACK",AgreePolicy:"I agree to the Terms of Use Privacy Policy",ALLSET:"You‘RE ALL SET",CreateAccount:"Create Account",Forget:"Forget your password",OrSignWith:"Or Sign in with",CONFIRMPASSWORD:"CONFIRM PASSWORD",PASSWORD:"PASSWORD",USERNAME:"USERNAME",WhyNeed:"why do we need this ？",BIRTHDAY:"BIRTHDAY",GENDER:"GENDER",Email:"Email",refundTitle:"Request refund",SignIn:"Sign In",Signin:"Signin",PlayNow:"Play Now","zh-CN":"zh","en-US":"en-US",MyProfile:"My Profile",LogOut:"Log out",HOME:"HOME",PLAY:"PLAY",STORE:"STORE",MAPS:"GAMES",Hint:"Hint",SureChangeLang:"Sure To Change Lang?",Sure:"Sure",Cancel:"Cancel",Save:"Save",Friends:"Friends",AddTo:"Add to",Refuse:"Refuse",Theme:"Theme",Length:"Length",Difficulty:"Difficulty",Size:"Size",ShowPrivateGames:"Show private games",ShowFutureGames:"Show future games",Game:"Game",ID:"ID",Schedule:"Schedule",Join:"Join",CreateGame:"Create Game",ScheduleAGame:"Schedule A Game",MyScheduledGames:"My Scheduled Games",StartTime:"Start Time",Coins:"Coins",coins:"coins",Games:"Games",USD2:"USD2",Purchase:"Purchase",TransactionComplete:"Transaction Complete!",DONE:"DONE",PurchaseWay:"Purchase Way",ChangePassword:"Change Password",NEWPASSWORD:"NEW PASSWORD"},Object(n["a"])(s,"CONFIRMPASSWORD","CONFIRM PASSWORD"),Object(n["a"])(s,"Next","Next"),Object(n["a"])(s,"NEXT","NEXT"),Object(n["a"])(s,"hours","hours"),Object(n["a"])(s,"players","players"),s)},"756e":function(e,t,a){"use strict";a.r(t),a.d(t,"m",(function(){return i}));var s,n=a("ade3"),i=(s={goShop:"去充值",payForSelf:"为自己支付",payForAll:"为所有人支付",PurchaseFailedCnt:"你没有足够的游戏币",PurchaseFailed:"支付失败",createRoomSuccessTitle:"支付成功",createRoomSuccessCnt:"您的游戏#{roomId} 预约于 {time}",refundSuccessTitle:"申请成功",refundSuccessCnt:"你将在3天内收到退款结果",chooseTime:"请选择预约时间",en:"英文",ch:"中文",PswNotSame:"密码不一致",RequireEmail:"请输入正确的邮箱",Require:"必填",RequirePassword:"请输入密码",RequireUsername:"请输入用户名",lengthMoreThan6:"长度大于6",FillInfo:"补全信息",EnterRoomPwd:"房间密码",BackSignPage:"返回登录界面",Resend:"重新发送",ResetEmailSend:"重置密码的链接已经发送到您的电子邮箱，没收到电子邮件？点击下方按钮重新发送。",EnterEmailToReset:"输入你注册账户所用的电子邮箱地址，我们会将重置密码的链接发送到你的邮箱中。",RequestRefund:"申请退款",AllGamesPlayed:"所有游戏记录",Late3:"最近3场游戏",NoShows:"爽约次数",Ganselied:"延迟取消预约",GamesWon:"胜利场次",GamesPlayed:"总场次",PaymentHistory:"付款记录",GameStats:"游戏记录",EditProfile:"编辑头像",AlreadyHaveAccount:"已经拥有账号?",LetsGo:"出发",FinishAndEnJoy:"预祝您游戏愉快！",BACK:"返回",AgreePolicy:"我已阅读并同意《服务协议》及《隐私政策》",ALLSET:"申请成功",CreateAccount:"创建账户",Forget:"找回密码",OrSignWith:"其他平台登录",CONFIRMPASSWORD:"确认密码",PASSWORD:"密码",USERNAME:"用户名",WhyNeed:"",BIRTHDAY:"生日",GENDER:"性别",Email:"邮箱",refundTitle:"退款理由",SignIn:"登录",Signin:"登录",PlayNow:"开始游戏","zh-CN":"中文","en-US":"英文",MyProfile:"我的",LogOut:"登出",HOME:"首页",PLAY:"游戏大厅",STORE:"游戏商城",MAPS:"游戏展示",Hint:"提示",SureChangeLang:"是否切换语言？",Sure:"确定",Cancel:"取消",Save:"保存",Friends:"好友列表",AddTo:"添加",Refuse:"拒绝",Theme:"主题",Length:"长度",Difficulty:"难度",Size:"人数",ShowPrivateGames:"显示未公开游戏",ShowFutureGames:"显示未开始游戏",Game:"游戏",ID:"ID",Schedule:"预约",Join:"加入",CreateGame:"创建游戏",ScheduleAGame:"预约游戏",MyScheduledGames:"我预约的游戏",StartTime:"开始时间",Coins:"金币",coins:"金币",Games:"游戏",USD2:"USD2",Purchase:"付款",TransactionComplete:"支付成功！",DONE:"完成",PurchaseWay:"支付方式",ChangePassword:"修改密码",NEWPASSWORD:"新密码"},Object(n["a"])(s,"CONFIRMPASSWORD","确认密码"),Object(n["a"])(s,"Next","下一步"),Object(n["a"])(s,"NEXT","下一步"),Object(n["a"])(s,"hours","小时"),Object(n["a"])(s,"players","玩家"),s)},7878:function(e,t,a){},8594:function(e,t,a){},"85ec":function(e,t,a){},"8b1b":function(e,t,a){},a4d9:function(e,t,a){},d714:function(e,t,a){},ddc9:function(e,t,a){},e7b3:function(e,t,a){}});